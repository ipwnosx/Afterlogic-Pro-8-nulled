(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"+v/2":function(e,t,i){"use strict";var o=i("o0Bx"),s=i("Jq2H");o.registerAbortRequestHandler(s.ServerModuleName,(function(e,t){switch(e.Method){case"GetFiles":return"GetFiles"===t.Method}return!1})),e.exports={send:function(e,t,i,n){o.send(s.ServerModuleName,e,t,i,n)},sendToWebclient:function(e,t,i,s){o.send("FilesWebclient",e,t,i,s)}}},"42lS":function(e,t,i){"use strict";var o=i("F/us"),s=i("0h2I"),n=i("czxF");function r(){n.call(this),this.htmlEmbed=s.observable("")}o.extendOwn(r.prototype,n.prototype),r.prototype.PopupTemplate="CoreWebclient_EmbedHtmlPopup",r.prototype.onOpen=function(e){this.htmlEmbed(e)},r.prototype.close=function(){this.closePopup(),this.htmlEmbed("")},e.exports=new r},"4KVt":function(e,t,i){"use strict";var o=i("F/us"),s=i("EVdn"),n=i("0h2I"),r=i("Yjhd"),a=i("czxF"),l=i("+v/2"),h=i("Pg7U");function u(){a.call(this),this.fCallback=null,this.link=n.observable(""),this.linkPrev=n.observable(""),this.linkFocus=n.observable(!1),this.checkTimeout=null,this.urlChecked=n.observable(!1),this.saveCommand=r.createCommand(this,this.executeSave,(function(){return this.urlChecked()})),this.fileItem=n.observable(null)}o.extendOwn(u.prototype,a.prototype),u.prototype.PopupTemplate="FilesWebclient_CreateLinkPopup",u.prototype.onOpen=function(e){this.link(""),this.linkFocus(!0),this.fCallback=e,this.checkTimer=setTimeout(o.bind(this.checkUrl,this),2e3)},u.prototype.checkUrl=function(){clearTimeout(this.checkTimer),this.link()!==this.linkPrev()&&(this.linkPrev(this.link()),l.send("CheckUrl",{Url:this.link()},this.onCheckUrlResponse,this)),this.checkTimer=setTimeout(o.bind(this.checkUrl,this),1e3)},u.prototype.onCheckUrlResponse=function(e,t){if(e.Result){var i=h.prepareLinkData(e.Result,this.link()),o=new h(i);this.fileItem(o),this.urlChecked(!0)}},u.prototype.executeSave=function(){s.isFunction(this.fCallback)&&(this.fCallback(this.fileItem()),this.link(""),this.linkPrev(""),this.urlChecked(!1)),clearTimeout(this.checkTimer),this.closePopup()},u.prototype.cancelPopup=function(){this.link(""),this.linkPrev(""),this.urlChecked(!1),clearTimeout(this.checkTimer),this.closePopup()},e.exports=new u},"5hOJ":function(e,t,i){"use strict";var o=i("wd/R"),s=i("RN+F"),n=i("Yjhd"),r=i("hPb3");function a(){this.iTimeStampInUTC=0,this.oMoment=null}a.prototype.parse=function(e){this.iTimeStampInUTC=e,this.oMoment=o.unix(this.iTimeStampInUTC)},a.prototype.setDate=function(e,t,i){this.oMoment=o([e,t,i])},a.prototype.getTimeFormat=function(){return r.timeFormat()===window.Enums.TimeFormat.F24?"HH:mm":"hh:mm A"},a.prototype.getFullDate=function(){return this.getDate()+" "+this.getTime()},a.prototype.getMidDate=function(){return this.getShortDate(!0)},a.prototype.getShortDate=function(e){var t="",i=null;return this.oMoment&&((i=o()).format("L")===this.oMoment.format("L")?t=this.oMoment.format(this.getTimeFormat()):(t=i.clone().subtract(1,"days").format("L")===this.oMoment.format("L")?s.i18n("COREWEBCLIENT/LABEL_YESTERDAY"):r.UserSelectsDateFormat?this.oMoment.format(n.getDateFormatForMoment(r.dateFormat())):i.year()===this.oMoment.year()?this.oMoment.format("MMM D"):this.oMoment.format("MMM D, YYYY"),e&&(t+=", "+this.oMoment.format(this.getTimeFormat())))),t},a.prototype.getDate=function(){var e="ddd, MMM D, YYYY";return r.UserSelectsDateFormat&&(e="ddd, "+n.getDateFormatForMoment(r.dateFormat())),this.oMoment?this.oMoment.format(e):""},a.prototype.getTime=function(){return this.oMoment?this.oMoment.format(this.getTimeFormat()):""},a.prototype.getTimeStampInUTC=function(){return this.iTimeStampInUTC},e.exports=a},AGjx:function(e,t,i){"use strict";var o=i("0h2I"),s=i("IAk5"),n=i("hPb3");function r(){this.davServer=o.observable(""),this.credentialsHintText=s.mobileCredentialsHintText,this.bDemo=n.IsDemo}r.prototype.ViewTemplate="FilesWebclient_MobileSyncSettingsView",r.prototype.populate=function(e){this.davServer(e.Server)},e.exports=new r},Au6d:function(e,t,i){"use strict";var o=i("F/us"),s=i("EVdn"),n=i("0h2I"),r=i("czxF");function a(){r.call(this),this.fCallback=null,this.folderName=n.observable(""),this.folderName.focus=n.observable(!1),this.folderName.error=n.observable(""),this.folderName.subscribe((function(){this.folderName.error("")}),this)}o.extendOwn(a.prototype,r.prototype),a.prototype.PopupTemplate="FilesWebclient_CreateFolderPopup",a.prototype.onOpen=function(e){this.folderName(""),this.folderName.focus(!0),this.folderName.error(""),s.isFunction(e)&&(this.fCallback=e)},a.prototype.onOKClick=function(){if(this.folderName.error(""),this.fCallback){var e=this.fCallback(this.folderName());e?this.folderName.error(""+e):this.closePopup()}else this.closePopup()},e.exports=new a},"Ig+v":function(e,t,i){var o=i("0h2I"),s=i("QaF5");function n(e){this.sName="",this.visible=o.observable(!0),this.baseHash=o.observable(""),this.hash=o.observable(""),this.linkText=o.observable(e),this.isCurrent=o.observable(!1),this.recivedAnim=o.observable(!1).extend({autoResetToFalse:500}),this.unseenCount=o.observable(0),this.allowChangeTitle=o.observable(!1),this.inactiveTitle=o.observable(""),this.excludedHashes=o.observableArray([])}n.prototype.ViewTemplate="CoreWebclient_HeaderItemView",n.prototype.setName=function(e){this.sName=e.toLowerCase(),""===this.baseHash()?(this.hash(s.buildHashFromArray([e.toLowerCase()])),this.baseHash(this.hash())):this.hash(this.baseHash())},e.exports=n},Jq2H:function(e,t,i){"use strict";i("0h2I");var o=i("F/us"),s=i("AFLV");e.exports={ServerModuleName:"Files",CorporateServerModuleName:"CorporateFiles",PersonalServerModuleName:"PersonalFiles",HashModuleName:"files",CustomTabTitle:"",Storages:[],EnableUploadSizeLimit:!1,PublicFolderName:"",PublicHash:"",UploadSizeLimitMb:0,UserSpaceLimitMb:0,TenantSpaceLimitMb:0,CorporateSpaceLimitMb:0,EditFileNameWithoutExtension:!1,ShowCommonSettings:!0,ShowFilesApps:!0,BottomLeftCornerLinks:[],ShowPersonalFilesAdminSection:!1,ShowCorporateFilesAdminSection:!1,PublicLinksEnabled:!0,init:function(e){var t=e[this.ServerModuleName],i=e[this.CorporateServerModuleName],n=e.FilesWebclient;o.isEmpty(t)||(this.CustomTabTitle=s.pString(t.CustomTabTitle,this.CustomTabTitle),this.Storages=s.pArray(t.Storages,this.Storages),this.EnableUploadSizeLimit=s.pBool(t.EnableUploadSizeLimit,this.EnableUploadSizeLimit),this.PublicFolderName=s.pString(t.PublicFolderName,this.PublicFolderName),this.PublicHash=s.pString(t.PublicHash,this.PublicHash),this.UploadSizeLimitMb=s.pNonNegativeInt(t.UploadSizeLimitMb,this.UploadSizeLimitMb),this.UserSpaceLimitMb=s.pNonNegativeInt(t.UserSpaceLimitMb,this.UserSpaceLimitMb),this.TenantSpaceLimitMb=s.pNonNegativeInt(t.TenantSpaceLimitMb,this.TenantSpaceLimitMb)),this.ShowPersonalFilesAdminSection=!0,o.isEmpty(i)||(this.ShowCorporateFilesAdminSection=!0,this.CorporateSpaceLimitMb=s.pNonNegativeInt(i.SpaceLimitMb,this.CorporateSpaceLimitMb)),o.isEmpty(n)||(this.EditFileNameWithoutExtension=s.pBool(n.EditFileNameWithoutExtension,this.EditFileNameWithoutExtension),this.ShowCommonSettings=s.pBool(n.ShowCommonSettings,this.ShowCommonSettings),this.ShowFilesApps=s.pBool(n.ShowFilesApps,this.ShowFilesApps),this.BottomLeftCornerLinks=s.pArray(n.BottomLeftCornerLinks,this.BottomLeftCornerLinks),this.PublicLinksEnabled=s.pBool(n.PublicLinksEnabled,this.PublicLinksEnabled))},updateAdmin:function(e,t){this.EnableUploadSizeLimit=e,this.UploadSizeLimitMb=t},updateAdminPersonal:function(e){this.PersonalSpaceLimitMb=e},updateAdminCorporate:function(e){this.CorporateSpaceLimitMb=e}}},KM9R:function(e,t,i){"use strict";var o=i("F/us"),s=i("0h2I"),n=i("RN+F"),r=i("ZP6a"),a=i("czxF"),l=i("OgeD"),h=i("76Kh"),u=i("+v/2"),p=i("MTJk"),c=l.run("ActivityHistory","getShowHistoryPopup");function d(){a.call(this),this.item=null,this.pub=s.observable(""),this.pubFocus=s.observable(!1),this.bAllowShowHistory=!!c}o.extendOwn(d.prototype,a.prototype),d.prototype.PopupTemplate="FilesWebclient_SharePopup",d.prototype.onOpen=function(e){this.item=e,this.pub(""),u.send("CreatePublicLink",{Type:e.storageType(),Path:e.path(),Name:e.fileName(),Size:e instanceof p?0:e.size(),IsFolder:e instanceof p},this.onCreatePublicLinkResponse,this)},d.prototype.onCreatePublicLinkResponse=function(e,t){e.Result&&(this.pub(r.getAppPath()+e.Result),this.pubFocus(!0),this.item.published(!0))},d.prototype.onCancelSharingClick=function(){this.item&&(u.send("DeletePublicLink",{Type:this.item.storageType(),Path:this.item.path(),Name:this.item.fileName()},this.closePopup,this),this.item.published(!1))},d.prototype.showHistory=function(){this.bAllowShowHistory&&h.showPopup(c,[n.i18n("FILESWEBCLIENT/HEADING_HISTORY_POPUP"),this.item])},e.exports=new d},MTJk:function(e,t,i){"use strict";var o=i("0h2I"),s=i("AFLV"),n=i("IAk5"),r=i("cGGv");function a(){this.selected=o.observable(!1),this.checked=o.observable(!1),this.deleted=o.observable(!1),this.recivedAnim=o.observable(!1).extend({autoResetToFalse:500}),this.published=o.observable(!1),this.isShared=o.observable(!1),this.fileName=o.observable(""),this.fullPath=o.observable(""),this.path=o.observable(""),this.storageType=o.observable(Enums.FileStorageType.Personal),this.displayName=o.observable(""),this.id=o.observable(""),this.sMainAction="list",this.oExtendedProps=null,this.uploadingFilesCount=o.observable(0),this.uploadedFilesCount=o.observable(0),this.progressPercent=o.computed((function(){return this.uploadingFilesCount()>0?Math.floor(this.uploadedFilesCount()/this.uploadingFilesCount()*100):0}),this),this.isIncomplete=o.computed((function(){return this.uploadingFilesCount()>0}),this),this.uploaded=o.computed((function(){return 0===this.uploadingFilesCount()}),this)}a.prototype.parse=function(e){this.published(!!e.Published),this.fileName(s.pString(e.Name)),this.fullPath(s.pString(e.FullPath)),this.path(s.pString(e.Path)),this.storageType(s.pString(e.Type)),this.displayName(this.fileName()),this.id(s.pString(e.Id)),this.oExtendedProps=e.ExtendedProps||[],e.MainAction&&(this.sMainAction=s.pString(e.MainAction)),n.broadcastEvent("FilesWebclient::ParseFolder::after",[this,e])},a.prototype.getMainAction=function(){return this.sMainAction},a.prototype.increaseUploadingFiles=function(){return this.uploadingFilesCount(this.uploadingFilesCount()+1)},a.prototype.increaseUploadedFiles=function(){return this.uploadedFilesCount(this.uploadedFilesCount()+1)},a.prototype.eventDragStart=r.prototype.eventDragStart,e.exports=a},Pg7U:function(e,t,i){"use strict";var o=i("F/us"),s=i("0h2I"),n=i("wd/R"),r=i("RN+F"),a=i("AFLV"),l=i("Yjhd"),h=i("IAk5"),u=i("ZCBP"),p=i("cGGv"),c=i("5hOJ"),d=i("76Kh"),m=i("42lS"),f=window.Enums;function b(e,t){this.IS_FILE=!0,this.storageType=s.observable(a.pString(e.Type)),this.sLastModified=b.parseLastModified(e.LastModified),this.iLastModified=a.pInt(e.LastModified),this.path=s.observable(a.pString(e.Path)),this.fullPath=s.observable(a.pString(e.FullPath)),this.selected=s.observable(!1),this.checked=s.observable(!1),this.bIsLink=!!e.IsLink,this.oExtendedProps=e.ExtendedProps,this.sLinkType=this.bIsLink?a.pString(e.LinkType):"",this.sLinkUrl=this.bIsLink?a.pString(e.LinkUrl):"",this.sThumbnailExternalLink=this.bIsLink?a.pString(e.ThumbnailUrl):"",this.deleted=s.observable(!1),this.recivedAnim=s.observable(!1).extend({autoResetToFalse:500}),this.published=s.observable(!1),this.sOwnerName=a.pString(e.Owner),p.call(this),this.content=s.observable(""),this.thumbUrlInQueueSubscribtion.dispose(),this.thumbUrlInQueue.subscribe((function(){""!==this.sThumbnailExternalLink?this.thumbnailSrc(this.sThumbnailExternalLink):this.bIsLink||this.getInThumbQueue()}),this),this.visibleCancelButton=s.computed((function(){return this.visibleProgress()&&100!==this.progressPercent()}),this),this.oActionsData.list={Text:r.i18n("COREWEBCLIENT/ACTION_VIEW_FILE"),Handler:o.bind((function(){h.broadcastEvent("Files::ShowList",{Item:this})}),this)},this.oActionsData.open={Text:r.i18n("COREWEBCLIENT/ACTION_OPEN_LINK"),Handler:o.bind(this.openLink,this)},this.iconAction(""),this.sHeaderText=o.bind((function(){if(this.sLastModified){var e=""!==this.sOwnerName?"FILESWEBCLIENT/INFO_OWNER_AND_DATA":"FILESWEBCLIENT/INFO_DATA";return r.i18n(e,{OWNER:this.sOwnerName,LASTMODIFIED:this.sLastModified})}return""}),this)(),this.type=this.storageType,this.canShare=s.computed((function(){return this.storageType()===f.FileStorageType.Personal||this.storageType()===f.FileStorageType.Corporate}),this),this.sHtmlEmbed=a.pString(e.OembedHtml),this.commonParseActions(e),this.cssClasses=s.computed((function(){var e=this.getCommonClasses();return this.allowDrag()&&e.push("dragHandle"),this.selected()&&e.push("selected"),this.checked()&&e.push("checked"),this.deleted()&&e.push("deleted"),this.allowPublicLink()&&this.published()&&e.push("published"),this.bIsLink&&e.push("aslink"),e.join(" ")}),this),this.parse(e,t)}o.extendOwn(b.prototype,p.prototype),b.parseLastModified=function(e){var t=new c;return e?(t.parse(e),t.getShortDate()):""},b.prepareLinkData=function(e,t){return{IsLink:!0,LinkType:e.LinkType,LinkUrl:t,Name:e.Name,Size:e.Size,ThumbnailUrl:e.Thumb}},b.prototype.parse=function(e,t){this.uploaded(!0),this.allowDrag(!t),this.allowUpload(!0),this.allowPublicLink(!0),this.allowActions(!t&&""!==this.fullPath()),this.fileName(a.pString(e.Name)),this.content(a.pString(e.Content)),this.id(a.pString(e.Id)),this.published(!!e.Published),this.size(a.pInt(e.Size)),this.hash(a.pString(e.Hash)),this.thumbUrlInQueue(""!==a.pString(e.ThumbnailUrl)?a.pString(e.ThumbnailUrl)+"/"+Math.random():""),this.mimeType(a.pString(e.ContentType)),this.bHasHtmlEmbed=!t&&""!==this.fullPath()&&"oembeded"===this.sLinkType,this.bHasHtmlEmbed&&this.iconAction("view"),this.isViewSupported()||this.bHasHtmlEmbed||this.actions(o.without(this.actions(),"view")),h.broadcastEvent("FilesWebclient::ParseFile::after",[this,e])},b.prepareUploadFileData=function(e,t,i,o){var s=e.FileName,r=l.getFileExtension(s),a=l.getFileNameWithoutExtension(s),u=0;for(""!==r&&(r="."+r);o(s);)s=a+"_"+u+r,u++;return e.FileName=s,{Name:s,LastModified:n().unix(),Owner:h.getUserPublicId(),Path:t,FullPath:t+"/"+s,Type:i,ContentType:e.Type,Size:e.Size}},b.prototype.viewFile=function(e,t){t&&(t.ctrlKey||t.shiftKey)||(""!==this.sHtmlEmbed?d.showPopup(m,[this.sHtmlEmbed]):this.bIsLink?this.viewCommonFile(this.sLinkUrl):this.viewCommonFile())},b.prototype.openLink=function(){this.bIsLink&&u.openTab(this.sLinkUrl)},b.prototype.commonParseActions=function(e){o.each(e.Actions,(function(e,t){this.oActionsData[t]||(this.oActionsData[t]={});var i="";"download"!==t&&"view"!==t||(i="&"+l.getRandomHash()),this.oActionsData[t].Url=a.pString(e.url)+i,this.actions.push(t)}),this)},e.exports=b},QFUI:function(e,t,i){"use strict";var o,s,n=i("RN+F"),r=i("76Kh"),a=i("1grR"),l=i("hPb3"),h={};h.getDownloadLink=function(e,t,i){return t.length>0?"?/Download/"+e+"/DownloadFile/"+t+"/"+(i?"0/"+i:""):""},h.getIframeWrappwer=function(e,t){return"?/Raw/Iframe/"+e+"/"+window.encodeURIComponent(t)+"/"},h.thumbQueue=(o={},s={},function(e,t,i){t&&i?!(e in s)||s[e]>0?(e in s||(s[e]=2,o[e]=[]),s[e]--,i(t)):o[e].push({imageSrc:t,imageSrcObserver:i,messageUid:e}):o[e]&&o[e].length&&(o[e][0].imageSrcObserver(o[e][0].imageSrc),o[e].shift())}),h.showErrorIfAttachmentSizeLimit=function(e,t){var i=n.i18n("COREWEBCLIENT/ERROR_UPLOAD_SIZE_DETAILED",{FILENAME:e,MAXSIZE:n.getFriendlySize(l.AttachmentSizeLimit)});return l.AttachmentSizeLimit>0&&t>l.AttachmentSizeLimit&&(r.showPopup(a,[i]),!0)},e.exports=h},TX6J:function(e,t,i){"use strict";var o=i("F/us"),s=i("0h2I"),n=i("AFLV"),r=i("OgeD").run("AdminPanelWebclient","getAbstractSettingsFormViewClass"),a=i("Jq2H");function l(){r.call(this,a.ServerModuleName,"UpdateSettingsForEntity"),this.userSpaceLimitMb=s.observable(a.UserSpaceLimitMb),this.tenantSpaceLimitMb=s.observable(a.TenantSpaceLimitMb),this.sEntityType="",this.iEntityId=0,this.isSuperAdmin=s.observable(!1),this.isVisible=s.observable(!0)}o.extendOwn(l.prototype,r.prototype),l.prototype.ViewTemplate="FilesWebclient_FilesPersonalAdminSettingsView",l.prototype.getCurrentValues=function(){return[this.userSpaceLimitMb(),this.tenantSpaceLimitMb()]},l.prototype.revertGlobalValues=function(){this.userSpaceLimitMb(a.UserSpaceLimitMb),this.tenantSpaceLimitMb(a.TenantSpaceLimitMb)},l.prototype.getParametersForSave=function(){var e={EntityType:this.sEntityType,EntityId:n.pInt(this.iEntityId),UserSpaceLimitMb:n.pInt(this.userSpaceLimitMb()),TenantSpaceLimitMb:n.pInt(this.tenantSpaceLimitMb())};return"Tenant"===this.sEntityType&&(e.TenantId=e.EntityId),e},l.prototype.applySavedValues=function(e){a.updateAdminPersonal(e.UserSpaceLimitMb)},l.prototype.setAccessLevel=function(e,t){this.sEntityType=e,this.iEntityId="User"===e||"Tenant"===e?t:0,this.visible(""===e||"Tenant"===e||"User"===e),this.isSuperAdmin(""===e)},l.prototype.hide=function(){this.isVisible(!1)},e.exports=new l},c3Cn:function(e,t,i){"use strict";var o=i("F/us"),s=i("OgeD"),n=i("ZP6a"),r=s.run("SettingsWebclient","getAbstractSettingsFormViewClass"),a=i("Jq2H");function l(){r.call(this,"FilesWebclient"),this.bShowFilesApps=a.ShowFilesApps,this.sAppPath=n.getAppPath()}o.extendOwn(l.prototype,r.prototype),l.prototype.ViewTemplate="FilesWebclient_FilesSettingsFormView",e.exports=new l},cGGv:function(e,t,i){"use strict";var o=i("F/us"),s=i("EVdn"),n=i("0h2I"),r=i("wd/R"),a=i("IAk5"),l=i("QFUI"),h=i("RN+F"),u=i("AFLV"),p=i("ZP6a"),c=i("Yjhd"),d=i("ZCBP"),m=["image/jpeg","image/jpg","image/png","image/gif","text/html","text/plain","text/css","text/rfc822-headers","message/delivery-status","application/x-httpd-php","application/javascript"],f=[];function b(){this.id=n.observable(""),this.index=n.observable(0),this.fileName=n.observable(""),this.tempName=n.observable(""),this.displayName=n.observable(""),this.extension=n.observable(""),this.fileName.subscribe((function(e){this.id(e),this.displayName(e),this.extension(c.getFileExtension(e))}),this),this.size=n.observable(0),this.friendlySize=n.computed((function(){return this.size()>0?h.getFriendlySize(this.size()):""}),this),this.hash=n.observable(""),this.thumbUrlInQueue=n.observable(""),this.thumbUrlInQueueSubscribtion=this.thumbUrlInQueue.subscribe((function(){this.getInThumbQueue()}),this),this.thumbnailSrc=n.observable(""),this.thumbnailLoaded=n.observable(!1),this.thumbnailSessionUid=n.observable(""),this.mimeType=n.observable(""),this.uploadUid=n.observable(""),this.uploaded=n.observable(!1),this.uploadError=n.observable(!1),this.downloading=n.observable(!1),this.isViewMimeType=n.computed((function(){return-1!==s.inArray(this.mimeType(),m)}),this),this.bHasHtmlEmbed=!1,this.otherTemplates=n.observableArray([]),this.visibleCancelButton=n.observable(!0),this.statusText=n.observable(""),this.statusTooltip=n.computed((function(){return this.uploadError()?this.statusText():""}),this),this.progressPercent=n.observable(0),this.visibleProgress=n.observable(!1),this.uploadStarted=n.observable(!1),this.uploadStarted.subscribe((function(){this.uploadStarted()?(this.uploaded(!1),this.visibleProgress(!0),this.progressPercent(20)):(this.progressPercent(100),this.visibleProgress(!1),this.uploaded(!0))}),this),this.downloading.subscribe((function(){this.downloading()?this.visibleProgress(!0):(this.visibleProgress(!1),this.progressPercent(0))}),this),this.allowDrag=n.observable(!1),this.allowUpload=n.observable(!1),this.allowPublicLink=n.observable(!1),this.bIsSecure=n.observable(!1),this.isShared=n.observable(!1),this.sHeaderText="",this.oActionsData={view:{Text:h.i18n("COREWEBCLIENT/ACTION_VIEW_FILE"),HandlerName:"viewFile"},download:{Text:h.i18n("COREWEBCLIENT/ACTION_DOWNLOAD_FILE"),HandlerName:"downloadFile",Tooltip:n.computed((function(){var e=h.i18n("COREWEBCLIENT/INFO_CLICK_TO_DOWNLOAD_FILE",{FILENAME:this.fileName(),SIZE:this.friendlySize()});return""===this.friendlySize()&&(e=e.replace(" ()","")),e}),this)}},this.allowActions=n.observable(!0),this.iconAction=n.observable("download"),this.cssClasses=n.computed((function(){return this.getCommonClasses().join(" ")}),this),this.actions=n.observableArray([]),this.firstAction=n.computed((function(){return this.actions().length>1?this.actions()[0]:""}),this),this.secondAction=n.computed((function(){return 1===this.actions().length?this.actions()[0]:this.actions().length>1?this.actions()[1]:""}),this),this.subFiles=n.observableArray([]),this.subFilesExpanded=n.observable(!1),this.sUploadSubFolder="",this.bIsHidden=!1}s("html").hasClass("pdf")&&(m.push("application/pdf"),m.push("application/x-pdf")),b.prototype.addAction=function(e,t,i){t?this.actions.unshift(e):this.actions.push(e),this.actions(o.compact(this.actions())),i&&(this.oActionsData[e]=i)},b.prototype.removeAction=function(e){this.actions(o.without(this.actions(),e))},b.prototype.getMainAction=function(){return this.actions()[0]},b.prototype.hasAction=function(e){return-1!==o.indexOf(this.actions(),e)},b.prototype.getActionText=function(e){return this.hasAction(e)&&this.oActionsData[e]&&("string"==typeof this.oActionsData[e].Text||o.isFunction(this.oActionsData[e].Text))?o.isFunction(this.oActionsData[e].Text)?this.oActionsData[e].Text():this.oActionsData[e].Text:""},b.prototype.getActionUrl=function(e){return this.hasAction(e)&&this.oActionsData[e]&&this.oActionsData[e].Url||""},b.prototype.executeAction=function(e){var t=this.hasAction(e)&&this.oActionsData[e];t&&(o.isFunction(t.Handler)?t.Handler():"string"==typeof t.HandlerName&&o.isFunction(this[t.HandlerName])&&this[t.HandlerName]())},b.prototype.getTooltip=function(e){var t=this.hasAction(e)&&this.oActionsData[e]?this.oActionsData[e].Tooltip:"";return"string"==typeof t?t:o.isFunction(t)?t():""},b.prototype.getCommonClasses=function(){var e=[];return(this.allowUpload()&&!this.uploaded()||this.downloading())&&e.push("incomplete"),this.uploadError()?e.push("fail"):e.push("success"),e},b.prototype.parse=function(e){this.fileName(u.pString(e.FileName)),this.tempName(u.pString(e.TempName)),""===this.tempName()&&this.tempName(this.fileName()),this.mimeType(u.pString(e.MimeType)),this.size(e.EstimatedSize?u.pInt(e.EstimatedSize):u.pInt(e.SizeInBytes)),this.hash(u.pString(e.Hash)),this.parseActions(e),this.uploadUid(this.hash()),this.uploaded(!0),s.isFunction(this.additionalParse)&&this.additionalParse(e)},b.prototype.parseActions=function(e){this.thumbUrlInQueue(""!==u.pString(e.ThumbnailUrl)?u.pString(e.ThumbnailUrl)+"/"+Math.random():""),this.commonParseActions(e),this.commonExcludeActions()},b.prototype.commonExcludeActions=function(){this.isViewSupported()||this.actions(o.without(this.actions(),"view"))},b.prototype.commonParseActions=function(e){o.each(e.Actions,(function(e,t){this.oActionsData[t]||(this.oActionsData[t]={}),this.oActionsData[t].Url=u.pString(e.url),this.actions.push(t)}),this)},b.addViewExtensions=function(e){o.isArray(e)&&(f=o.union(f,e))},b.prototype.isViewSupported=function(){return-1!==s.inArray(this.mimeType(),m)||-1!==s.inArray(this.extension(),f)},b.prototype.getInThumbQueue=function(){""===this.thumbUrlInQueue()||this.linked&&(!this.linked||this.linked())||(this.thumbnailSessionUid(Date.now().toString()),l.thumbQueue(this.thumbnailSessionUid(),this.thumbUrlInQueue(),this.thumbnailSrc))},b.prototype.downloadFile=function(e){var t=this.getActionUrl("download"),i={File:this,CancelDownload:!1};t.length>0&&"#"!==t&&(e||a.broadcastEvent("AbstractFileModel::FileDownload::before",i),i.CancelDownload||(o.isFunction(i.CustomDownloadHandler)?i.CustomDownloadHandler():(t+="/"+r().unix(),p.downloadByUrl(t,"eml"===this.extension()))))},b.prototype.viewFile=function(e,t){c.calmEvent(t),this.viewCommonFile()},b.prototype.viewCommonFile=function(e){var t=null,i=null;u.isNonEmptyString(e)||(e=p.getAppPath()+this.getActionUrl("view")),e.length>0&&"#"!==e&&(i={sUrl:e,index:this.index(),bBreakView:!1},a.broadcastEvent("AbstractFileModel::FileView::before",i),i.bBreakView||(t=d.open(i.sUrl,i.sUrl,!1))&&t.focus())},b.prototype.eventDragStart=function(e,t){var i=t.originalEvent||t;return e&&i&&i.dataTransfer&&i.dataTransfer.setData&&i.dataTransfer.setData("DownloadURL",this.generateTransferDownloadUrl()),!0},b.prototype.generateTransferDownloadUrl=function(){var e=this.getActionUrl("download");return"http"!==e.substr(0,4)&&(e=p.getAppPath()+e),this.mimeType()+":"+this.fileName()+":"+e},b.prototype.onUploadSelect=function(e,t,i){i||(this.fileName(u.pString(t.FileName)),this.mimeType(u.pString(t.Type)),this.size(u.pInt(t.Size))),this.uploadUid(e),this.uploaded(!1),this.statusText(""),this.progressPercent(0),this.visibleProgress(!1),this.sUploadSubFolder=u.pString(t.Folder),this.bIsHidden=""!==this.sUploadSubFolder},b.prototype.onUploadStart=function(){this.visibleProgress(!0)},b.prototype.onUploadProgress=function(e,t){t>0&&(this.progressPercent(Math.ceil(e/t*100)),this.visibleProgress(!0))},b.prototype.onDownloadProgress=function(e,t){t>0&&(this.progressPercent(Math.ceil(e/t*100)),this.visibleProgress(this.progressPercent()<100))},b.prototype.onUploadComplete=function(e,t,i){var o,s=!(t&&i&&!i.ErrorCode&&i.Result&&!i.Result.Error),n=i&&i.ErrorCode&&i.ErrorCode===Enums.Errors.CanNotUploadFileLimit?h.i18n("COREWEBCLIENT/ERROR_UPLOAD_SIZE"):h.i18n("COREWEBCLIENT/ERROR_UPLOAD_UNKNOWN");this.progressPercent(0),this.visibleProgress(!1),this.uploaded(!0),this.uploadError(s),this.statusText(s?n:h.i18n("COREWEBCLIENT/REPORT_UPLOAD_COMPLETE")),s||(this.fillDataAfterUploadComplete(i,e),setTimeout((o=this,function(){o.statusText("")}),3e3))},b.prototype.fillDataAfterUploadComplete=function(e,t){},b.prototype.onImageLoad=function(e,t){""===this.thumbUrlInQueue()||this.thumbnailLoaded()||(this.thumbnailLoaded(!0),l.thumbQueue(this.thumbnailSessionUid()))},b.prototype.stopDownloading=function(){this.downloading(!1)},b.prototype.startDownloading=function(){this.downloading(!0)},e.exports=b},dtb0:function(e,t,i){"use strict";var o=i("F/us"),s=i("EVdn"),n=i("0h2I"),r=i("RN+F"),a=i("AFLV"),l=i("Yjhd"),h=i("JFZZ"),u=i("IAk5"),p=i("mjrp"),c=i("kwPS"),d=i("OgeD"),m=i("QaF5"),f=i("SQrT"),b=i("hPb3"),y=i("xcwT"),g=i("76Kh"),E=i("1grR"),S=i("20Ah"),F=i("Au6d"),v=i("4KVt"),T=i("qsz4"),P=i("KM9R"),C=d.run("SharedFiles","getFilesSharePopup"),L=d.run("MailWebclient","getComposeMessageWithAttachments"),A=i("p2SF"),I=i("+v/2"),D=i("Jq2H"),w=i("Pg7U"),N=i("MTJk"),k=window.Enums;function U(e){y.call(this,"FilesWebclient"),this.browserTitle=n.observable(r.i18n("FILESWEBCLIENT/HEADING_BROWSER_TAB")),this.bAllowSendEmails=o.isFunction(L),this.error=n.observable(!1),this.loaded=n.observable(!1),this.bPublic=u.isPublic(),this.storages=n.observableArray([]),this.folders=n.observableArray(),this.files=n.observableArray(),this.uploadingFiles=n.observableArray(),this.rootPath=n.observable(this.bPublic?D.PublicFolderName:r.i18n("FILESWEBCLIENT/LABEL_PERSONAL_STORAGE")),this.storageType=n.observable(k.FileStorageType.Personal),this.storageDisplayName=n.computed((function(){var e=this.getStorageByType(this.storageType());return e?e.displayName:""}),this),this.storageType.subscribe((function(){if(this.bPublic)this.rootPath(D.PublicFolderName);else{var e=this.getStorageByType(this.storageType());e?this.rootPath(e.displayName):"corporate"===this.storageType()&&this.rootPath(r.i18n("FILESWEBCLIENT/LABEL_CORPORATE_STORAGE")),this.selector.listCheckedAndSelected(!1)}}),this),this.newItemsDisabled=n.computed((function(){return this.storageType()===k.FileStorageType.Shared}),this),this.createButtonsControllers=n.observableArray([]),this.pathItems=n.observableArray(),this.currentPath=n.observable(""),this.isZipFolder=n.computed((function(){var e=this.currentPath().split("$ZIP:");return"zip"===l.getFileExtension(e[0])}),this),this.dropPath=n.observable(""),n.computed((function(){this.dropPath(this.currentPath())}),this),this.filesCollection=n.computed((function(){var e=o.union(this.files(),this.getUploadingFiles());return e.sort((function(e,t){return e.fileName()===t.fileName()?0:e.fileName()<t.fileName()?-1:1})),e}),this),this.collection=n.computed((function(){return o.union(this.folders(),this.filesCollection())}),this),this.columnCount=n.observable(1),this.selector=new c(this.collection,o.bind(this.onItemSelect,this),o.bind(this.onItemDelete,this),o.bind(this.onItemDblClick,this),o.bind(this.onEnter,this),this.columnCount,!0,!0,!0),this.firstSelectedFile=n.computed((function(){return o.find(this.selector.listCheckedAndSelected(),(function(e){return e instanceof w}))}),this),this.selectedCount=n.computed((function(){return this.selector.listCheckedAndSelected().length}),this),this.searchPattern=n.observable(""),this.newSearchPattern=n.observable(""),this.isSearchFocused=n.observable(!1),this.checkedReadyForOperations=n.computed((function(){return(this.selector.listCheckedAndSelected()||[]).every((function(e){return!(void 0!==e.uploaded&&!1===e.uploaded()||void 0!==e.downloading&&!0===e.downloading())}))}),this),this.renameCommand=l.createCommand(this,this.executeRename,(function(){return!this.isZipFolder()&&this.checkedReadyForOperations()&&1===this.selector.listCheckedAndSelected().length&&!this.isDisabledRenameButton()})),this.deleteCommand=l.createCommand(this,this.executeDelete,(function(){return this.storageType()!==k.FileStorageType.Shared&&!this.isZipFolder()&&this.checkedReadyForOperations()&&this.selector.listCheckedAndSelected().length>0&&!this.isDisabledDeleteButton()})),this.downloadCommand=l.createCommand(this,this.executeDownload,(function(){if(this.checkedReadyForOperations()){var e=this.getFileIfOnlyOneSelected();return!!e&&e.hasAction("download")}return!1})),this.shareCommand=l.createCommand(this,this.executeShare,(function(){var e=this.selector.listCheckedAndSelected();return!this.isZipFolder()&&this.checkedReadyForOperations()&&1===e.length&&!e[0].bIsLink})),this.sendCommand=l.createCommand(this,this.executeSend,(function(){if(!this.isZipFolder()&&this.checkedReadyForOperations()){var e=this.selector.listCheckedAndSelected();return o.filter(e,(function(e){return e instanceof w}),this).length>0}return!1})),this.uploaderButton=n.observable(null),this.uploaderArea=n.observable(null),this.bDragActive=n.observable(!1),this.isNewItemsMenuOpened=n.observable(!1),this.bDragActiveComp=n.computed((function(){return this.bDragActive()&&""===this.searchPattern()}),this),this.bAllowDragNDrop=!1,this.uploadError=n.observable(!1),this.quota=n.observable(0),this.used=n.observable(0),this.quotaDesc=n.observable(""),this.quotaProc=n.observable(-1),this.aBottomLeftCornerLinks=D.BottomLeftCornerLinks,n.computed((function(){if(!b.ShowQuotaBar)return!0;var e=this.quota(),t=this.used(),i=0<e?Math.ceil(t/e*100):-1;i=100<i?100:i,this.quotaProc(i),this.quotaDesc(-1<i?r.i18n("COREWEBCLIENT/INFO_QUOTA",{PROC:i,QUOTA:r.getFriendlySize(e)}):""),b.QuotaWarningPerc>0&&-1!==i&&b.QuotaWarningPerc>100-i&&f.showError(r.i18n("COREWEBCLIENT/WARNING_QUOTA_ALMOST_REACHED"),!0)}),this),this.dragover=n.observable(!1),this.loading=n.observable(!1),this.loadedFiles=n.observable(!1),this.fileListInfoText=n.computed((function(){var e="";return this.loading()?e=r.i18n("COREWEBCLIENT/INFO_LOADING"):this.loadedFiles()?0===this.collection().length&&(""!==this.searchPattern()?e=r.i18n("FILESWEBCLIENT/INFO_NOTHING_FOUND"):this.storageType()===k.FileStorageType.Shared?e=r.i18n("FILESWEBCLIENT/INFO_SHARED_FOLDER_IS_EMPTY"):""!==this.currentPath()||this.bInPopup||this.bPublic?e=r.i18n("FILESWEBCLIENT/INFO_FOLDER_IS_EMPTY"):this.bAllowDragNDrop&&(e=r.i18n("FILESWEBCLIENT/INFO_DRAGNDROP_FILES_OR_CREATE_FOLDER"))):this.error()&&(e=r.i18n("FILESWEBCLIENT/ERROR_FILES_NOT_RECEIVED")),e}),this),this.dragAndDropHelperBound=o.bind(this.dragAndDropHelper,this),this.bInPopup=!!e,this.isCurrentStorageExternal=n.computed((function(){var e=this.getStorageByType(this.storageType());return e&&e.isExternal}),this),this.timerId=null;var t={View:this,TemplateName:"FilesWebclient_ItemsView"};this.itemsViewTemplate=n.observable(t.TemplateName),u.broadcastEvent("Files::ChangeItemsView",t),this.addToolbarButtons=n.observableArray([]),u.subscribeEvent("Files::ShowList",o.bind((function(e){this.shown()&&e.Item&&this.routeFiles(e.Item.storageType(),e.Item.fullPath())}),this)),u.broadcastEvent("FilesWebclient::ConstructView::after",{Name:this.ViewConstructorName,View:this}),S.opened.subscribe(o.bind((function(){this.shown()&&this.selector.useKeyboardKeys(!0)}),this)),this.createFolderButtonModules=n.observableArray([]),this.renameButtonModules=n.observableArray([]),this.deleteButtonModules=n.observableArray([]),this.shortcutButtonModules=n.observableArray([]),this.isDisabledCreateFolderButton=n.computed((function(){return this.createFolderButtonModules().length>0}),this),this.isDisabledRenameButton=n.computed((function(){return this.renameButtonModules().length>0}),this),this.isDisabledDeleteButton=n.computed((function(){return this.deleteButtonModules().length>0}),this),this.isDisabledShortcutButton=n.computed((function(){return this.shortcutButtonModules().length>0}),this),this.createFolderCommand=l.createCommand(this,this.executeCreateFolder,(function(){return!this.isZipFolder()&&!this.isDisabledCreateFolderButton()})),this.createShortcutCommand=l.createCommand(this,this.executeCreateShortcut,(function(){return!this.isZipFolder()&&!this.isDisabledShortcutButton()&&!this.isCurrentStorageExternal()})),this.PublicLinksEnabled=D.PublicLinksEnabled}o.extendOwn(U.prototype,y.prototype),U.prototype.ViewTemplate=u.isPublic()?"FilesWebclient_PublicFilesView":"FilesWebclient_FilesView",U.prototype.ViewConstructorName="CFilesView",U.prototype.registerCreateButtonsController=function(e){this.createButtonsControllers().push(e)},U.prototype.onBind=function(e){var t=this.$viewDom||e;this.selector.initOnApplyBindings(".items_sub_list .item",".items_sub_list .selected.item",".items_sub_list .item .custom_checkbox",s(".panel.files .items_list",t),s(".panel.files .items_list .files_scroll.scroll-inner",t)),this.initUploader(),this.hotKeysBind()},U.prototype.hotKeysBind=function(){s(document).on("keydown",o.bind((function(e){this.shown()&&e&&e.keyCode===k.Key.s&&this.selector.useKeyboardKeys()&&!l.isTextFieldFocused()&&(e.preventDefault(),this.isSearchFocused(!0))}),this))},U.prototype.initUploader=function(){var e=this;!this.bPublic&&this.uploaderButton()&&this.uploaderArea()&&(this.oJua=new p({action:"?/Api/",name:"jua-uploader",queueSize:2,clickElement:this.uploaderButton(),hiddenElementsPosition:b.IsRTL?"right":"left",dragAndDropElement:this.uploaderArea(),disableAjaxUpload:!1,disableFolderDragAndDrop:!1,disableDragAndDrop:!1,hidden:o.extendOwn({Module:D.ServerModuleName,Method:"UploadFile",Parameters:function(t){return JSON.stringify({Type:e.storageType(),SubPath:t&&t.Folder||"",Path:e.dropPath(),Overwrite:!1})}},u.getCommonRequestParameters())}),this.oJua.on("onProgress",o.bind(this.onFileUploadProgress,this)).on("onSelect",o.bind(this.onFileUploadSelect,this)).on("onStart",o.bind(this.onFileUploadStart,this)).on("onDrop",o.bind(this.onDrop,this)).on("onComplete",o.bind(this.onFileUploadComplete,this)).on("onBodyDragEnter",o.bind(this.bDragActive,this,!0)).on("onBodyDragLeave",o.bind(this.bDragActive,this,!1)).on("onCancel",o.bind(this.onCancelUpload,this)).on("onDialog",o.bind((function(){setTimeout(o.bind(this.isNewItemsMenuOpened,this,!1),0)}),this,!1)),this.bAllowDragNDrop=this.oJua.isDragAndDropSupported())},U.prototype.onFileUploadSelect=function(e,t){if(D.EnableUploadSizeLimit&&t.Size/1048576>D.UploadSizeLimitMb)return g.showPopup(E,[r.i18n("FILESWEBCLIENT/ERROR_SIZE_LIMIT",{FILENAME:t.FileName,SIZE:D.UploadSizeLimitMb})]),!1;if(this.storageType()===k.FileStorageType.Personal&&a.isPositiveNumber(this.quota())&&this.quota()>0&&this.used()+t.Size>this.quota())return g.showPopup(E,[r.i18n("COREWEBCLIENT/ERROR_CANT_UPLOAD_FILE_QUOTA")]),!1;if(""===this.searchPattern()){var i=w.prepareUploadFileData(t,this.currentPath(),this.storageType(),o.bind((function(e){return!!this.getFileByName(e)||!!o.find(this.getUploadingFiles(),(function(t){return t.fileName()===e}))}),this)),s=new w(i);s.onUploadSelect(e,t,!0),this.uploadingFiles.push(s),this.onFileFromSubfolderUploadSelect(t)}},U.prototype.onFileFromSubfolderUploadSelect=function(e){if(a.isNonEmptyString(e.Folder)){var t=o.compact(e.Folder.split("/"))[0],i=o.find(this.folders(),(function(e){return e.fileName()===t}));t&&!i&&((i=new N).parse({Name:t}),this.folders.push(i)),i.increaseUploadingFiles()}},U.prototype.onFileUploadStart=function(e){var t=this.getUploadFileByUid(e);t&&t.onUploadStart()},U.prototype.onFileUploadProgress=function(e,t,i){if(""===this.searchPattern()){var o=this.getUploadFileByUid(e);o&&o.onUploadProgress(t,i)}},U.prototype.onFileUploadComplete=function(e,t,i){if(""===this.searchPattern()){var o=this.getUploadFileByUid(e),s=!1;o?(o.onUploadComplete(e,t,i),this.onFileWithSubfolderUploadComplete(o),this.deleteUploadFileByUid(e),o.uploadError()?(this.uploadError(!0),i&&i.ErrorCode===k.Errors.CanNotUploadFileQuota?(g.showPopup(E,[r.i18n("COREWEBCLIENT/ERROR_CANT_UPLOAD_FILE_QUOTA")]),s=!0):i&&i.ErrorCode===k.Errors.FileAlreadyExists?(s=!0,f.showError(r.i18n("COREWEBCLIENT/ERROR_FILE_ALREADY_EXISTS"))):i&&i.ErrorCode===k.Errors.FileNotFound?(s=!0,f.showError(r.i18n("COREWEBCLIENT/ERROR_FILE_NOT_FOUND"))):f.showError(o.statusText())):(o.path()===this.currentPath()&&o.storageType()===this.storageType()&&this.files.push(o),0===this.uploadingFiles().length&&f.showReport(r.i18n("COREWEBCLIENT/REPORT_UPLOAD_COMPLETE"))),0===this.uploadingFiles().length&&(s=!0)):s=!0,s&&this.routeFiles(this.storageType(),this.currentPath(),this.searchPattern(),!0)}},U.prototype.onFileWithSubfolderUploadComplete=function(e){if(e.sUploadSubFolder){var t=o.compact(e.sUploadSubFolder.split("/"))[0],i=o.find(this.folders(),(function(e){return e.fileName()===t}));i&&i.increaseUploadedFiles()}},U.prototype.onDrop=function(e,t){if(!this.bPublic)if(t&&t.target&&""===this.searchPattern()){var i=n.dataFor(t.target);i&&i instanceof N&&this.dropPath(i.fullPath())}else f.showReport(r.i18n("FILESWEBCLIENT/INFO_CANNOT_UPLOAD_SEARCH_RESULT"))},U.prototype.filesDrop=function(e,t,i){if(t){var o=this.selector.listCheckedAndSelected(),s=t.ctrlKey?"Copy":"Move";this.moveItems(s,e,o)&&l.uiDropHelperAnim(t,i)}},U.prototype.moveItems=function(e,t,i){if(this.bPublic)return!1;var s="",n="",a=!0,l=t instanceof N?t.fullPath():"",h=[],u=t?t instanceof N?t.storageType():t.type:this.storageType(),p=this.getStorageByType(u),c=this.getStorageByType(this.storageType()),d=p.type===c.type,m=this.used(),f=this.quota();if(d||!d&&!p.isExternal&&!c.isExternal&&k.FileStorageType.Shared!==p.type){if(p.type===k.FileStorageType.Personal&&c.type!==k.FileStorageType.Personal&&!o.every(i,(function(e){if(e instanceof w){if(f>0&&m+e.size()>f)return!1;m+=e.size()}return!0})))return g.showPopup(E,[r.i18n("FILESWEBCLIENT/ERROR_CANT_MOVE_FILES_QUOTA_PLURAL",{},"",i.length)]),!1;if(o.each(i,o.bind((function(t){(""!==s&&s!==t.path()||""!==n&&n!==t.storageType())&&(a=!1),s=t.path(),n=t.storageType(),t instanceof N&&l===s+"/"+t.id()||("Move"===e&&(t instanceof w?this.deleteFileByName(t.id()):this.deleteFolderByName(t.fileName())),h.push({FromType:n,FromPath:s,Name:t.id(),IsFolder:t instanceof N}))}),this)),h.length>0)return a||(n="",s=""),I.send(e,{FromType:n,ToType:u,FromPath:s,ToPath:l,Files:h},this.onMoveResponse,this),t instanceof N&&t.recivedAnim(!0),!0}return!1},U.prototype.onMoveResponse=function(e,t){e.Result?this.storageType()===t.Parameters.ToType&&this.currentPath()===t.Parameters.ToPath?this.routeFiles(this.storageType(),this.currentPath(),this.searchPattern()):this.getQuota():(e.ErrorCode===k.Errors.CanNotUploadFileQuota?g.showPopup(E,[r.i18n("FILESWEBCLIENT/ERROR_CANT_MOVE_FILES_QUOTA_PLURAL",{},"",t.Parameters.Files.length)]):h.showErrorByCode(e,r.i18n("FILESWEBCLIENT/ERROR_FILES_MOVE_PLURAL",{},"",t.Parameters.Files.length)),this.routeFiles(this.storageType(),this.currentPath(),this.searchPattern()))},U.prototype.dragAndDropHelper=function(e){e&&e.checked(!0);var t=l.draggableItems(),i=this.selector.listCheckedAndSelected(),n=i.length,a=0,h=0,u="";return o.each(i,(function(e){e instanceof N?h++:a++}),this),0!==a&&0!==h?u=r.i18n("FILESWEBCLIENT/LABEL_DRAG_ITEMS_PLURAL",{COUNT:n},null,n):0===a?u=r.i18n("FILESWEBCLIENT/LABEL_DRAG_FOLDERS_PLURAL",{COUNT:h},null,h):0===h&&(u=r.i18n("FILESWEBCLIENT/LABEL_DRAG_FILES_PLURAL",{COUNT:a},null,a)),s(".count-text",t).text(u),t},U.prototype.onItemDelete=function(){var e=this.selector.listCheckedAndSelected(),t=e.every((function(e){return!(void 0!==e.uploaded&&!1===e.uploaded()||void 0!==e.downloading&&!0===e.downloading())}));0<e.length&&t&&this.executeDelete()},U.prototype.onItemSelect=function(e){u.isMobile()&&e instanceof N&&this.onItemDblClick(e)},U.prototype.onEnter=function(e){this.onItemDblClick(e)},U.prototype.onItemDblClick=function(e){if(e){var t=e.getMainAction();switch(t){case"view":e instanceof w&&(this.onSelectClickPopupBound?this.onSelectClickPopupBound():e.executeAction(t));break;case"list":e instanceof N&&e.isIncomplete()||this.routeFiles(e.storageType(),e.fullPath())}}},U.prototype.onGetFilesResponse=function(e,t){var i=e.Result,s=t.Parameters;if(this.bNotLoading=!1,(s.Type===this.storageType()||s.Hash===D.PublicHash)&&s.Path===this.currentPath())if(i){var n=[],a=[];o.each(i.Items,(function(e){if(e.IsFolder){var t=new N;t.parse(e),this.checkIfFolderUploading(t),n.push(t)}else{var i=new w(e,this.bInPopup);i.oExtendedProps&&i.oExtendedProps.Loading&&(i.uploadError(!0),i.statusText(r.i18n("COREWEBCLIENT/LABEL_FILE_LOADING"))),i.index(a.length),a.push(i)}}),this),o.each(this.files(),(function(e,t,i){if(e.downloading()){var s=o.findIndex(a,(function(t){return e.fileName()===t.fileName()}));-1!==s&&(i[t].index(a[s].index()),a[s]=i[t])}})),this.folders(n),this.files(a),this.newSearchPattern(s.Pattern||""),this.searchPattern(s.Pattern||""),this.loadedFiles(!0),clearTimeout(this.timerId),this.parseQuota(i.Quota),o.isArray(i.Path)&&(this.pathItems.removeAll(),o.each(i.Path.reverse(),o.bind((function(e){var t=new N;t.parse(e),this.pathItems.push(t)}),this))),this.loading(!1),i.Access&&this.pathItems().length>0&&(this.pathItems()[this.pathItems().length-1].oExtendedProps?this.pathItems()[this.pathItems().length-1].oExtendedProps.Access||(this.pathItems()[this.pathItems().length-1].oExtendedProps.Access=i.Access,this.pathItems.valueHasMutated()):(this.pathItems()[this.pathItems().length-1].oExtendedProps={Access:i.Access},this.pathItems.valueHasMutated()))}else e.ErrorCode!==k.Errors.NotDisplayedError&&(this.loading(!1),this.error(!0))},U.prototype.checkIfFolderUploading=function(e){o.each(this.uploadingFiles(),(function(t){if(t.sUploadSubFolder){var i=o.compact(t.sUploadSubFolder.split("/"))[0];e.fileName()===i&&e.increaseUploadingFiles()}}))},U.prototype.parseQuota=function(e){e&&(this.quota(e.Limit),this.used(e.Used))},U.prototype.onDeleteResponse=function(e,t){e.Result?(this.expungeFileItems(),this.getQuota()):(h.showErrorByCode(e),this.routeFiles(this.storageType(),this.currentPath(),this.searchPattern()))},U.prototype.executeRename=function(){var e=o.first(this.selector.listCheckedAndSelected()),t=D.EditFileNameWithoutExtension&&e instanceof w,i=t?l.getFileNameWithoutExtension(e.fileName()):e.fileName(),s=t?l.getFileExtension(e.fileName()):"";!this.bPublic&&e&&g.showPopup(T,[i,o.bind(this.renameItem,this,s)])},U.prototype.renameItem=function(e,t){var i=""===e?t:t+"."+e,s=o.first(this.selector.listCheckedAndSelected());return l.validateFileOrFolderName(i)?(I.send("Rename",{Type:s.storageType(),Path:s.path(),Name:s.id()||s.fileName(),NewName:i,IsLink:s.bIsLink?1:0,IsFolder:s instanceof N},this.onRenameResponse,this),""):s instanceof N?r.i18n("FILESWEBCLIENT/ERROR_INVALID_FOLDER_NAME"):r.i18n("FILESWEBCLIENT/ERROR_INVALID_FILE_NAME")},U.prototype.getFileIfOnlyOneSelected=function(){var e=this.selector.listCheckedAndSelected();return 1===e.length&&e[0]instanceof w?e[0]:null},U.prototype.executeDownload=function(){var e=this.getFileIfOnlyOneSelected();e&&e.executeAction("download")},U.prototype.executeShare=function(){var e=o.first(this.selector.listCheckedAndSelected());!this.bPublic&&e&&g.showPopup(P,[e])},U.prototype.executeSend=function(){var e=this.selector.listCheckedAndSelected(),t=o.filter(e,(function(e){return e instanceof w}),this),i=o.map(t,(function(e){return{Storage:e.storageType(),Path:e.path(),Name:e.fileName(),Id:e.id()}}));this.bAllowSendEmails&&t.length>0&&I.send("SaveFilesAsTempFiles",{Files:i},(function(e){e.Result&&L(e.Result)}),this)},U.prototype.onShareIconClick=function(e){e&&g.showPopup(P,[e])},U.prototype.onSecureIconClick=function(e){e&&o.isFunction(e.onSecureIconClick)&&e.onSecureIconClick(e)},U.prototype.onFileShareIconClick=function(e){C&&e&&g.showPopup(C,[e])},U.prototype.onRenameResponse=function(e,t){e.Result||h.showErrorByCode(e,r.i18n("FILESWEBCLIENT/ERROR_FILE_RENAME")),this.routeFiles(this.storageType(),this.currentPath(),this.searchPattern(),!0)},U.prototype.refresh=function(){this.routeFiles(this.storageType(),this.currentPath(),this.searchPattern(),!0)},U.prototype.executeDelete=function(){var e=this.selector.listCheckedAndSelected()||[],t=e.length,i=!!o.find(e,(function(e){return e instanceof N})),s=!!o.find(e,(function(e){return!(e instanceof N)})),n="";n=i&&s?r.i18n("FILESWEBCLIENT/CONFIRM_DELETE_ITEMS_PLURAL",{COUNT:t},null,t):i?r.i18n("FILESWEBCLIENT/CONFIRM_DELETE_FOLDERS_PLURAL",{COUNT:t},null,t):r.i18n("FILESWEBCLIENT/CONFIRM_DELETE_FILES_PLURAL",{COUNT:t},null,t),!this.bPublic&&t>0&&(this.selector.useKeyboardKeys(!1),g.showPopup(S,[n,o.bind(this.deleteItems,this,e),"",r.i18n("COREWEBCLIENT/ACTION_DELETE")]))},U.prototype.onShow=function(){this.loaded(!0),this.bPublic||this.requestStorages(),this.selector.useKeyboardKeys(!0),this.oJua&&this.oJua.setDragAndDropEnabledStatus(!0)},U.prototype.onHide=function(){this.selector.useKeyboardKeys(!1),this.oJua&&this.oJua.setDragAndDropEnabledStatus(!1)},U.prototype.getQuota=function(){I.send("GetQuota",{Type:this.storageType()},(function(e){e.Result&&this.parseQuota(e.Result)}),this)},U.prototype.getStorageByType=function(e){return o.find(this.storages(),(function(t){return t.type===e}))},U.prototype.requestStorages=function(){I.send("GetStorages",null,this.onGetStoragesResponse,this)},U.prototype.onGetStoragesResponse=function(e,t){var i=e.Result;i&&(o.each(i,(function(e){e.Type&&!this.getStorageByType(e.Type)&&this.storages.push({isExternal:e.IsExternal,type:e.Type,displayName:e.DisplayName,droppable:a.pBool(e.IsDroppable,!0)})}),this),this.expungeExternalStorages(o.map(i,(function(e){return e.Type}),this))),this.getStorageByType(this.storageType())||(this.storageType(k.FileStorageType.Personal),this.pathItems.removeAll()),this.bInPopup&&this.routeFiles(this.storageType(),this.currentPath(),this.searchPattern(),!0)},U.prototype.showLoading=function(){this.folders([]),this.files([]),this.loading(!0)},U.prototype.routeFiles=function(e,t,i,o){var s=!1;this.bPublic?m.setHash(A.getFiles("",t,""))&&(this.showLoading(),I.send("GetPublicFiles",{Hash:D.PublicHash,Path:this.currentPath()},this.onGetFilesResponse,this)):(this.bNotLoading=o,this.bInPopup?this.onUserRoute(A.getParsedParams(e,t,i)):m.setHash(A.getFiles(e,t,i))&&(this.showLoading(),s=""!==this.currentPath()&&0===this.pathItems().length,I.send("GetFiles",{Type:this.storageType(),Path:this.currentPath(),Pattern:this.searchPattern(),PathRequired:s},this.onGetFilesResponse,this),s&&this.showLoading()))},U.prototype.addPathItems=function(e,t,i){var o=new N;o.storageType(e),o.displayName(i),o.fileName(i),o.path(t),o.fullPath(t),this.pathItems.unshift(o)},U.prototype.onRoute=function(e){var t=A.parseFiles(e);this.bPublic?this.onPublicRoute(t):this.onUserRoute(t)},U.prototype.onUserRoute=function(e){var t=0===this.storages().length||!!o.find(this.storages(),(function(t){return t.type===e.Storage}))?e.Storage:this.storages().length>0?this.storages()[0].type:"",i=e.Path,s=e.PathParts.reverse(),n=o.find(this.folders(),(function(e){return e.fullPath()===i})),r=o.findIndex(this.pathItems(),(function(e){return e.fullPath()===i})),l=[],h=!1;this.error(!1),this.storageType(t),this.currentPath(i),this.loadedFiles(!1),-1!==r?(o.each(this.pathItems(),(function(e,t){t<=r&&l.push(e)})),this.pathItems.removeAll(),this.pathItems(l)):n?this.pathItems.push(n):"google"!==t||""===i?(this.pathItems.removeAll(),o.each(s,o.bind((function(e){var o=i.lastIndexOf(e);this.addPathItems(t,i,e),i=i.substr(0,o)}),this))):h=!0,this.bNotLoading&&(this.files().length>0||this.folders().length>0)?this.timerId=setTimeout(o.bind((function(){this.loadedFiles()||this.error()||this.showLoading()}),this),3e3):this.showLoading(),I.send("GetFiles",{Type:t,Path:e.Path,Pattern:a.pString(e.Search),PathRequired:h},this.onGetFilesResponse,this)},U.prototype.onPublicRoute=function(e){var t=e.Path,i=e.PathParts.reverse(),s="";this.currentPath(t),this.pathItems.removeAll(),o.each(i,o.bind((function(i){var o=t.lastIndexOf(i);this.addPathItems(e.Storage,t,i),t=t.substr(0,o),s=i}),this)),s!==this.rootPath()&&this.addPathItems(e.Storage,"",this.rootPath()),this.showLoading(),I.send("GetPublicFiles",{Hash:D.PublicHash,Path:this.currentPath()},this.onGetFilesResponse,this)},U.prototype.deleteItems=function(e,t){var i=this.storageType(),s=this.currentPath();if(t&&0<e.length){var n=o.compact(o.map(e,(function(e){return""!==e.id()?(e.deleted(!0),i=e.storageType(),{Path:e.path(),Name:e.id(),IsFolder:e instanceof N}):null})));n.length&&I.send("Delete",{Type:i,Path:s,Items:n},this.onDeleteResponse,this)}},U.prototype.getFileByName=function(e){return o.find(this.files(),(function(t){return t.fileName()===e}))},U.prototype.addFileToCurrentFolder=function(e){""===this.searchPattern()&&this.files.push(e)},U.prototype.deleteFileByName=function(e){this.files(o.filter(this.files(),(function(t){return t.id()!==e})))},U.prototype.deleteFolderByName=function(e){this.folders(o.filter(this.folders(),(function(t){return t.fileName()!==e})))},U.prototype.expungeFileItems=function(){this.folders(o.filter(this.folders(),(function(e){return!e.deleted()}),this)),this.files(o.filter(this.files(),(function(e){return!e.deleted()}),this))},U.prototype.expungeExternalStorages=function(e){this.storages(o.filter(this.storages(),(function(t){return!t.isExternal||o.include(e,t.type)}),this))},U.prototype.getUploadFileByUid=function(e){return o.find(this.uploadingFiles(),(function(t){return t.uploadUid()===e}))},U.prototype.deleteUploadFileByUid=function(e){this.uploadingFiles(o.filter(this.uploadingFiles(),(function(t){return t.uploadUid()!==e})))},U.prototype.getUploadingFiles=function(){return o.filter(this.uploadingFiles(),o.bind((function(e){return e.path()===this.currentPath()&&e.storageType()===this.storageType()}),this))},U.prototype.onCancelUpload=function(e){this.deleteUploadFileByUid(e),this.oJua&&this.oJua.cancel(e)},U.prototype.onCreateFolderResponse=function(e,t){e.Result||h.showErrorByCode(e),this.routeFiles(this.storageType(),this.currentPath(),this.searchPattern(),!0)},U.prototype.createFolder=function(e){return e=s.trim(e),l.validateFileOrFolderName(e)?(I.send("CreateFolder",{Type:this.storageType(),Path:this.currentPath(),FolderName:e},this.onCreateFolderResponse,this),""):r.i18n("FILESWEBCLIENT/ERROR_INVALID_FOLDER_NAME")},U.prototype.executeCreateFolder=function(){g.showPopup(F,[o.bind(this.createFolder,this)])},U.prototype.onCreateLinkResponse=function(e,t){this.routeFiles(this.storageType(),this.currentPath(),this.searchPattern(),!0)},U.prototype.createLink=function(e){I.send("CreateLink",{Type:this.storageType(),Path:this.currentPath(),Link:e.sLinkUrl,Name:e.fileName()},this.onCreateLinkResponse,this)},U.prototype.executeCreateShortcut=function(){var e=o.bind(this.createLink,this);g.showPopup(v,[e])},U.prototype.onSearch=function(){this.routeFiles(this.storageType(),this.currentPath(),this.newSearchPattern())},U.prototype.clearSearch=function(){this.routeFiles(this.storageType(),this.currentPath())},U.prototype.getCurrentFolder=function(){var e=new N;return e.fullPath(this.currentPath()),e.storageType(this.storageType()),e},U.prototype.registerToolbarButtons=function(e){a.isNonEmptyArray(e)&&(o.each(e,o.bind((function(e){o.isFunction(e.useFilesViewData)&&e.useFilesViewData(this)}),this)),this.addToolbarButtons(o.union(this.addToolbarButtons(),e)))},U.prototype.onFileRemove=function(e,t){var i=o.bind((function(e,t){var i=[{Path:this.currentPath(),Name:t,IsFolder:!1}];I.send("Delete",{Type:this.storageType(),Path:this.currentPath(),Items:i},o.bind((function(){var e=""!==this.currentPath()&&0===this.pathItems().length;I.send("GetFiles",{Type:this.storageType(),Path:this.currentPath(),Pattern:this.searchPattern(),PathRequired:e},this.onGetFilesResponse,this)}),this)),this.onCancelUpload(e)}),this);if(t.downloading())u.broadcastEvent("CFilesView::FileDownloadCancel",{oFile:t});else if(!t.uploaded()&&e){u.broadcastEvent("CFilesView::FileUploadCancel",{sFileUploadUid:e,sFileUploadName:t.fileName(),fOnUploadCancelCallback:i})||i(e,t.fileName())}},U.prototype.disableButton=function(e,t){-1===e.indexOf(t)&&e.push(t)},U.prototype.enableButton=function(e,t){e.remove(t)},e.exports=U},kbJU:function(e,t,i){"use strict";var o=i("F/us"),s={FileStorageType:{Personal:"personal",Corporate:"corporate",Shared:"shared",GoogleDrive:"google",Dropbox:"dropbox",Encrypted:"encrypted"},FileStorageLinkType:{Unknown:0,GoogleDrive:1,Dropbox:2,YouTube:3,Vimeo:4,SoundCloud:5}};void 0===window.Enums&&(window.Enums={}),o.extendOwn(window.Enums,s)},kwPS:function(e,t,i){"use strict";var o=i("F/us"),s=i("EVdn"),n=i("0h2I"),r=i("AFLV"),a=i("Yjhd"),l=i("IAk5"),h=i("HLSX"),u=i("76Kh");function p(e,t,i,a,h,u,p,c,d,m,f){this.fSelectCallback=t||function(){},this.fDeleteCallback=i||function(){},this.fDblClickCallback=!l.isMobile()&&a?a:function(){},this.fEnterCallback=h||function(){},this.bResetCheckedOnClick=!!p,this.bCheckOnSelect=!!c,this.bUnselectOnCtrl=!!d,this.bDisableMultiplySelection=!!m,this.bChangeOnSelect=void 0===f||!!f,this.useKeyboardKeys=n.observable(!1),this.list=n.observableArray([]),e&&e.subscribe&&e.subscribe((function(e){this.list(e)}),this),this.multiplyLineFactor=u,this.oLast=null,this.oListScope=null,this.oScrollScope=null,this.iTimer=0,this.iFactor=1,this.KeyUp=Enums.Key.Up,this.KeyDown=Enums.Key.Down,this.KeyLeft=Enums.Key.Up,this.KeyRight=Enums.Key.Down,this.multiplyLineFactor&&(this.multiplyLineFactor.subscribe?this.multiplyLineFactor.subscribe((function(e){this.iFactor=0<e?e:1}),this):this.iFactor=r.pInt(this.multiplyLineFactor),this.KeyUp=Enums.Key.Up,this.KeyDown=Enums.Key.Down,this.KeyLeft=Enums.Key.Left,this.KeyRight=Enums.Key.Right,s("html").hasClass("rtl")&&(this.KeyLeft=Enums.Key.Right,this.KeyRight=Enums.Key.Left)),this.sActionSelector="",this.sSelectableSelector="",this.sCheckboxSelector="";var b=this;this.listChecked=n.computed({read:function(){return o.filter(this.list(),(function(e){var t=e&&e.checked&&e.checked(),i=e&&e.selected&&e.selected();return t||b.bCheckOnSelect&&i}))},write:function(e){e=!!e,o.each(this.list(),(function(t){t.checked(e)})),this.list.valueHasMutated()},owner:this}),this.checkAll=n.computed({read:function(){return 0<this.listChecked().length},write:function(e){this.listChecked(!!e)},owner:this}),this.selectorHook=n.observable(null),this.selectorHook.subscribe((function(){var e=this.selectorHook();e&&o.isFunction(e.selected)&&e.selected(!1)}),this,"beforeChange"),this.selectorHook.subscribe((function(e){e&&e.selected(!0)}),this),this.itemSelected=n.computed({read:this.selectorHook,write:function(e){this.selectorHook(e),e&&(b.scrollToSelected(),this.oLast=e)},owner:this}),this.list.subscribe((function(e){if(o.isArray(e)){var t=this.itemSelected();t&&(o.find(e,(function(e){return t===e}))||this.itemSelected(null))}else this.itemSelected(null)}),this),this.listCheckedOrSelected=n.computed({read:function(){var e=this.itemSelected(),t=this.listChecked();return 0<t.length?t:e?[e]:[]},write:function(e){e?this.listChecked(!0):(this.itemSelected(null),this.listChecked(!1))},owner:this}),this.listCheckedAndSelected=n.computed({read:function(){var e=[],t=this.itemSelected(),i=this.listChecked();return i&&(e=i.slice(0)),t&&-1===o.indexOf(i,t)&&e.push(t),e},write:function(e){e?this.listChecked(!0):(this.itemSelected(null),this.listChecked(!1))},owner:this}),this.isIncompleteChecked=n.computed((function(){var e=this.list().length,t=this.listChecked().length;return 0<e&&0<t&&e>t}),this),this.onKeydownBound=o.bind(this.onKeydown,this)}p.prototype.iTimer=0,p.prototype.bResetCheckedOnClick=!1,p.prototype.bCheckOnSelect=!1,p.prototype.bUnselectOnCtrl=!1,p.prototype.bDisableMultiplySelection=!1,p.prototype.getLastOrSelected=function(){var e=0,t=null;return o.each(this.list(),(function(i){i.checked()&&e++,i.selected()&&(t=i)})),0===e&&t?t:this.oLast},p.prototype.initOnApplyBindings=function(e,t,i,o,r){s(document).on("keydown",this.onKeydownBound),this.oListScope=o,this.oScrollScope=r,this.sActionSelector=e,this.sSelectableSelector=t,this.sCheckboxSelector=i;var a=this,l=function(e,t,i){var o=0,s=0,n=null,r=!1,l=!1,h=[],u=!1;if(t=t||null,i&&i.shiftKey&&null!==t&&null!==e&&t!==e)for(h=a.list(),u=t.checked(),o=0,s=h.length;o<s;o++)r=!1,(n=h[o])!==e&&n!==t||(r=!0),r&&(l=!l),(l||r)&&n.checked(u);t&&(a.oLast=t)};s(this.oListScope).on("dblclick",e,(function(e){var t=n.dataFor(this);!t||!e||e.ctrlKey||e.altKey||e.shiftKey||a.onDblClick(t)})),h.mobileDevice&&s(this.oListScope).on("touchstart",e,(function(e){if(e){var t=e.timeStamp,i=t-(s(this).data("lastTouch")||t),o=e.originalEvent&&e.originalEvent.touches?e.originalEvent.touches.length:0;s(this).data("lastTouch",t),!i||i>250||o>1||(e.preventDefault(),s(this).trigger("dblclick"))}})),s(this.oListScope).on("click",e,(function(e){var t=!0,i=null,o=a.getLastOrSelected(),s=n.dataFor(this);s&&e&&(e.shiftKey?(t=!1,a.bDisableMultiplySelection||(null===a.oLast&&(a.oLast=s),s.checked(!s.checked()),l(o,s,e))):e.ctrlKey&&(t=!1,a.bDisableMultiplySelection||(a.oLast=s,!(i=a.itemSelected())||i.checked()||s.checked()||i.checked(!0),a.bUnselectOnCtrl&&s===a.itemSelected()?(s.checked(!s.selected()),a.itemSelected(null)):s.checked(!s.checked()))),t&&a.selectionFunc(s))})),s(this.oListScope).on("click",i,(function(e){var t=n.dataFor(this);t&&e&&!a.bDisableMultiplySelection&&(e.shiftKey?(null===a.oLast&&(a.oLast=t),l(a.getLastOrSelected(),t,e)):a.oLast=t),e&&e.stopPropagation&&e.stopPropagation()})),s(this.oListScope).on("dblclick",i,(function(e){e&&e.stopPropagation&&e.stopPropagation()}))},p.prototype.getResultSelection=function(e,t){var i=this,n=!1,r=!1,a=null,l=this.iFactor,h=!!this.multiplyLineFactor,u=0,p=0,c=[];if(!e&&-1<s.inArray(t,[this.KeyUp,this.KeyDown,this.KeyLeft,this.KeyRight,Enums.Key.PageUp,Enums.Key.PageDown,Enums.Key.Home,Enums.Key.End]))(c=this.list())&&0<c.length&&(-1<s.inArray(t,[this.KeyDown,this.KeyRight,Enums.Key.PageUp,Enums.Key.Home])?a=c[0]:-1<s.inArray(t,[this.KeyUp,this.KeyLeft,Enums.Key.PageDown,Enums.Key.End])&&(a=c[c.length-1]));else if(e&&0<(p=(c=this.list())?c.length:0))if(Enums.Key.Home===t||Enums.Key.PageUp===t||Enums.Key.End===t||Enums.Key.PageDown===t||h&&(Enums.Key.Left===t||Enums.Key.Right===t)||!h&&(Enums.Key.Up===t||Enums.Key.Down===t))o.each(c,(function(o){if(!n)switch(t){case i.KeyUp:case i.KeyLeft:e===o?n=!0:a=o;break;case Enums.Key.Home:case Enums.Key.PageUp:a=o,n=!0;break;case i.KeyDown:case i.KeyRight:r?(a=o,n=!0):e===o&&(r=!0);break;case Enums.Key.End:case Enums.Key.PageDown:a=o}}));else if(h&&this.KeyDown===t){for(;u<p;u++)if(e===c[u]){p-1<(u+=l)&&(u-=l),a=c[u];break}}else if(h&&this.KeyUp===t)for(u=p;u>=0;u--)if(e===c[u]){0>(u-=l)&&(u+=l),a=c[u];break}return a},p.prototype.shiftClickResult=function(e,t,i){if(t){var n=!!this.multiplyLineFactor,r=!1,a=!1;-1<s.inArray(i,n?[Enums.Key.Left,Enums.Key.Right]:[Enums.Key.Up,Enums.Key.Down])?t.checked(!t.checked()):-1<s.inArray(i,n?[Enums.Key.Up,Enums.Key.Down,Enums.Key.PageUp,Enums.Key.PageDown,Enums.Key.Home,Enums.Key.End]:[Enums.Key.Left,Enums.Key.Right,Enums.Key.PageUp,Enums.Key.PageDown,Enums.Key.Home,Enums.Key.End])&&(a=!t.checked(),o.each(this.list(),(function(i){var o=!1;i!==e&&t!==i||(r=!r,o=!0),(r||o)&&(i.checked(a),o=!1)})),n&&e&&(i===Enums.Key.Up||i===Enums.Key.Down)&&e.checked(!e.checked()))}},p.prototype.clickNewSelectPosition=function(e,t){var i=this.itemSelected(),o=this.getResultSelection(i,e);o&&(t&&this.shiftClickResult(o,i,e),this.selectionFunc(o))},p.prototype.onKeydown=function(e){var t=!0,i=0;return this.useKeyboardKeys()&&e&&!a.isTextFieldFocused()&&!u.hasOpenedMaximizedPopups()&&(i=e.keyCode,e.ctrlKey||this.KeyUp!==i&&this.KeyDown!==i&&this.KeyLeft!==i&&this.KeyRight!==i&&Enums.Key.PageUp!==i&&Enums.Key.PageDown!==i&&Enums.Key.Home!==i&&Enums.Key.End!==i?Enums.Key.Del!==i||e.ctrlKey||e.shiftKey?Enums.Key.Enter===i?0<this.list().length&&!e.ctrlKey&&(this.onEnter(this.itemSelected()),t=!1):!e.ctrlKey||e.altKey||e.shiftKey||Enums.Key.a!==i||(this.checkAll(!(this.checkAll()&&!this.isIncompleteChecked())),t=!1):0<this.list().length&&(this.onDelete(),t=!1):(this.clickNewSelectPosition(i,e.shiftKey),t=!1)),t},p.prototype.onDelete=function(){this.fDeleteCallback.call(this,this.listCheckedOrSelected())},p.prototype.onEnter=function(e){e&&this.fEnterCallback.call(this,e)},p.prototype.selectionFunc=function(e){this.bChangeOnSelect&&this.itemSelected(null),this.bResetCheckedOnClick&&this.listChecked(!1),this.bChangeOnSelect&&this.itemSelected(e),this.fSelectCallback.call(this,e)},p.prototype.onDblClick=function(e){this.fDblClickCallback.call(this,e)},p.prototype.koCheckAll=function(){return n.computed({read:this.checkAll,write:this.checkAll,owner:this})},p.prototype.koCheckAllIncomplete=function(){return n.computed({read:this.isIncompleteChecked,write:this.isIncompleteChecked,owner:this})},p.prototype.scrollToSelected=function(){if(!this.oListScope||!this.oScrollScope)return!1;var e=s(this.sSelectableSelector,this.oScrollScope),t=e.position(),i=this.oScrollScope.height(),o=this.oScrollScope.scrollTop(),n=e.outerHeight(),r=t&&t.top>=o&&t.top<=o+i-n;return!(!t||r)&&(t.top<o+i&&t.top+n>o+i?this.oScrollScope.scrollTop(t.top+n+20-i):this.oScrollScope.scrollTop(t.top-20),!0)},e.exports=p},mjrp:function(e,t,i){"use strict";var o=i("EVdn"),s=i("F/us"),n=i("0h2I"),r=i("w+bY"),a=i("RN+F"),l=i("AFLV"),h=i("IAk5"),u=i("hPb3"),p=i("76Kh"),c=i("1grR"),d=u.MultipleFilesUploadLimit;function m(e){return void 0===e}function f(e){0<e&&clearTimeout(e),e=0}function b(e){return(e=e&&(e.originalEvent?e.originalEvent:e)||window.event).dataTransfer?e:null}function y(e,t,i){return e&&t&&!m(e[t])?e[t]:i}function g(e,t,i){e[t]=i}function E(){return"jua-uid-"+function(e){var t="",i="0123456789abcdefghijklmnopqrstuvwxyz";for(e=m(e)?32:l.pInt(e);t.length<e;)t+=i.substr(Math.round(Math.random()*i.length),1);return t}(16)+"-"+(new Date).getTime().toString()}function S(e,t){return{FileName:m(e.fileName)?m(e.name)?null:e.name:e.fileName,Size:m(e.fileSize)?m(e.size)?null:e.size:e.fileSize,Type:m(e.type)?null:e.type,Folder:m(t)?"":t,File:e}}function F(e,t,i,o,s,n){var r=0,a=0,h=0,u=null,p=null,c=!1,f=!1,b=function(e,t,i,a){if(e&&!m(e.name))if(t=t||"",e.isFile)e.file((function(e){!c||0<=--s?i(S(e,t)):c&&!f&&0>s&&n&&(f=!0,n(r))}));else if(o&&e.isDirectory&&e.createReader){var h=e.createReader(),u=0,p=0;h&&h.readEntries&&h.readEntries((function(o){if(o&&l.isNonEmptyArray(o))for(u=0,p=o.length;u<p;u++)b(o[u],t+e.name+"/",i,a)}))}};if(o=!!m(o)||!!o,i=!m(i)&&!!i,s=m(s)?d:l.pInt(s),r=s,c=0<s,e=e&&0<e.length?e:null)for(h=0,a=e.length;h<a;h++)(u=e[h])&&(i?"file"===u.kind&&u.webkitGetAsEntry&&(p=u.webkitGetAsEntry())&&b(p,"",t,n):!c||0<=--s?t(S(u)):c&&!f&&0>s&&n&&(f=!0,n(r)))}function v(e,t,i,o){var s=e&&e.files&&0<e.files.length?e.files:null;s?F(s,t,!1,!1,i,o):t({FileName:e.value.split("\\").pop().split("/").pop(),Size:null,Type:null,Folder:"",File:null})}function T(e){var t=!1;if(e&&e.dataTransfer&&e.dataTransfer.types&&e.dataTransfer.types.length)for(var i=0,o=e.dataTransfer.types.length;i<o;i++)if("files"===e.dataTransfer.types[i].toLowerCase()){t=!0;break}return t}function P(){return o('<label style="position: absolute; background-color:#fff; right: 0px; top: 0px; left: 0px; bottom: 0px; margin: 0px; padding: 0px; cursor: pointer;"></label>').css({opacity:0})}function C(e,t,i,s){e=m(e)?"":e.toString();var n=function(e,t){return""!==t&&(t=' accept="'+t+'"'),o('<input type="file" tabindex="-1" hidefocus="hidefocus" style="position: absolute; '+e+': -9999px;"'+t+" />")}(i=m(i)?"left":i.toString(),s=m(s)?"":s.toString());return 0<e.length&&n.attr("name",e),(m(t)||t)&&n.prop("multiple",!0),n}function L(e,t){return l.pString(s.isFunction(e)?e.apply(null,s.isArray(t)?t:[]):e)}function A(e,t){this.oXhrs={},this.oUids={},this.oJua=e,this.oOptions=t}function I(e,t){this.oUids={},this.oForms={},this.oJua=e,this.oOptions=t}function D(e){e=m(e)?{}:e;var t=this;t.bEnableDnD=!0,t.bEnableButton=!0,t.oEvents={onDialog:null,onSelect:null,onStart:null,onComplete:null,onCompleteAll:null,onProgress:null,onDragEnter:null,onDragLeave:null,onDrop:null,onBodyDragEnter:null,onBodyDragLeave:null,onLimitReached:function(){p.showPopup(c,[a.i18n("COREWEBCLIENT/ERROR_UPLOAD_NUMBER_LIMIT_PLURAL",{NUMBERLIMIT:d},null,d)])}},t.oOptions=s.extend({action:"",name:"",hidden:{},queueSize:10,clickElement:!1,dragAndDropElement:!1,dragAndDropBodyElement:!1,disableAjaxUpload:!1,disableFolderDragAndDrop:!0,disableDragAndDrop:!1,disableMultiple:!1,disableDocumentDropPrevent:!1,disableAutoUploadOnDrop:!1,multipleSizeLimit:d,hiddenElementsPosition:"left"},e),t.oQueue=r(l.pInt(y(t.oOptions,"queueSize",10))),t.runEvent("onCompleteAll")&&t.oQueue.await((function(){t.runEvent("onCompleteAll")})),t.oDriver=t.isAjaxUploaderSupported()&&!y(t.oOptions,"disableAjaxUpload",!1)?new A(t,t.oOptions):new I(t,t.oOptions),t.oClickElement=y(t.oOptions,"clickElement",null),t.oClickElement&&(o(t.oClickElement).css({position:"relative",overflow:"hidden"}),"inline"===o(this.oClickElement).css("display")&&o(this.oClickElement).css("display","inline-block"),this.oDriver.generateNewInput(this.oClickElement)),this.oDriver.isDragAndDropSupported()&&y(this.oOptions,"dragAndDropElement",!1)&&!y(this.oOptions,"disableAjaxUpload",!1)?function(e){var t=o(document),i=o(y(e.oOptions,"dragAndDropBodyElement",!1)||t),s=y(e.oOptions,"dragAndDropElement",!1);s&&(y(e.oOptions,"disableDocumentDropPrevent",!1)||t.on("dragover",(function(t){if(e.bEnableDnD&&t&&(t=b(t))&&t.dataTransfer&&T(t))try{t.dataTransfer.dropEffect="none",t.preventDefault()}catch(e){}})),i&&i[0]&&i.on("dragover",(function(t){e.bEnableDnD&&t&&f(e.iDocTimer)})).on("dragenter",(function(t){e.bEnableDnD&&t&&(t=b(t))&&T(t)&&(f(e.iDocTimer),t.preventDefault(),e.runEvent("onBodyDragEnter",[t]))})).on("dragleave",(function(t){e.bEnableDnD&&t&&(t=b(t))&&(f(e.iDocTimer),e.iDocTimer=setTimeout((function(){e.runEvent("onBodyDragLeave",[t])}),200))})).on("drop",(function(t){if(e.bEnableDnD&&t&&(t=b(t))){var i=T(t);return i&&t.preventDefault(),e.runEvent("onBodyDragLeave",[t]),!i}return!1})),o(s).bind("dragenter",(function(t){e.bEnableDnD&&t&&(t=b(t))&&T(t)&&(f(e.iDocTimer),t.preventDefault(),e.runEvent("onDragEnter",[s,t]))})).bind("dragover",(function(t){if(e.bEnableDnD&&t&&(t=b(t))&&t.dataTransfer&&T(t))try{var o=t.dataTransfer.effectAllowed;f(e.iDocTimer),t.dataTransfer.dropEffect="move"===o||"linkMove"===o?"move":"copy",t.stopPropagation(),t.preventDefault(),i.trigger("dragover",t)}catch(e){}})).bind("dragleave",(function(t){if(e.bEnableDnD&&t){if(t=b(t)){var i=document.elementFromPoint?document.elementFromPoint(t.clientX,t.clientY):null;if(i&&(n=i,r=!1,(o=this)&&n&&(r=o===n||(o.contains?o.contains(n):!!n.compareDocumentPosition&&!!(8&n.compareDocumentPosition(o)))),r))return;f(e.iDocTimer),e.runEvent("onDragLeave",[s,t])}}else var o,n,r})).bind("drop",(function(t){e.bEnableDnD&&t&&(t=b(t))&&T(t)&&(t.preventDefault(),function(e,t,i,o,s){var n=null,r=null;(e=b(e))&&((n=(e.dataTransfer?y(e.dataTransfer,"items",null):null)||y(e,"items",null))&&0<n.length&&n[0]&&n[0].webkitGetAsEntry?F(n,t,!0,s,i,o):T(e)&&(r=y(e,"files",null)||(e.dataTransfer?y(e.dataTransfer,"files",null):null))&&0<r.length&&F(r,t,!1,!1,i,o))}(t,(function(i){i&&(y(e.oOptions,"disableAutoUploadOnDrop",!1)?e.runEvent("onDrop",[i,t,function(){e.addNewFile(i),f(e.iDocTimer)}]):(e.runEvent("onDrop",[i,t]),e.addNewFile(i),f(e.iDocTimer)))}),y(e.oOptions,"multipleSizeLimit",d),e.getEvent("onLimitReached"),!y(e.oOptions,"disableFolderDragAndDrop",!0))),e.runEvent("onDragLeave",[t])})))}(t):t.bEnableDnD=!1,g(t,"on",t.on),g(t,"cancel",t.cancel),g(t,"isDragAndDropSupported",t.isDragAndDropSupported),g(t,"isAjaxUploaderSupported",t.isAjaxUploaderSupported),g(t,"setDragAndDropEnabledStatus",t.setDragAndDropEnabledStatus)}A.prototype.oXhrs={},A.prototype.oUids={},A.prototype.oJua=null,A.prototype.oOptions={},A.prototype.isDragAndDropSupported=function(){return!0},A.prototype.regTaskUid=function(e){this.oUids[e]=!0},A.prototype.uploadTask=function(e,t,i,n,r,a,l){if(!1===this.oUids[e]||!t||!t.File)return n(null,e),!1;try{var h=this,u=new XMLHttpRequest,p=new FormData,c=y(this.oOptions,"action",""),d=s.clone(y(this.oOptions,"hidden",{})),f=this.oJua.getEvent("onStart"),b=this.oJua.getEvent("onComplete"),g=this.oJua.getEvent("onProgress");return u.open("POST",c,!0),u.setRequestHeader("Authorization","Bearer "+o.cookie("AuthToken")),u.setRequestHeader("X-Client","WebClient"),g&&u.upload&&(u.upload.onprogress=function(i){i&&i.lengthComputable&&!m(i.loaded)&&!m(i.total)&&(void 0===l?g(e,i.loaded,i.total):g(e,l+i.loaded>t.Size?t.Size:l+i.loaded,t.Size))}),u.onreadystatechange=function(){if(4===u.readyState&&200===u.status){if(b&&!r){var t=!1,i=null;try{i=o.parseJSON(u.responseText),t=!0}catch(e){i=null}b(e,t,i)}m(h.oXhrs[e])||(h.oXhrs[e]=null),n(a?u.responseText:null,e)}else 4===u.readyState&&(b(e,!1,null),n(null,e))},f&&f(e),p.append("jua-post-type","ajax"),p.append(y(this.oOptions,"name","juaFile"),t.File,t.FileName),i=s.extend(i,t.Hidden||{}),d.Parameters=JSON.stringify(i),o.each(d,(function(e,i){p.append(e,L(i,[t]))})),u.send(p),this.oXhrs[e]=u,!0}catch(e){window.console&&window.console.error(e)}return n(null,e),!1},A.prototype.generateNewInput=function(e){var t=this,i=null,s=null;e&&(s=C("",!y(this.oOptions,"disableMultiple",!1),y(this.oOptions,"hiddenElementsPosition","left"),y(this.oOptions,"accept","")),(i=P()).append(s),o(e).append(i),s.on("click",(function(e){if(t.oJua.bEnableButton){var i=t.oJua.getEvent("onDialog");i&&i()}else e.preventDefault()})).on("change",(function(){v(this,(function(o){t.oJua.addNewFile(o),t.generateNewInput(e),setTimeout((function(){i.remove()}),10)}),y(t.oOptions,"multipleSizeLimit",d),t.oJua.getEvent("onLimitReached"))})))},A.prototype.cancel=function(e){if(this.oUids[e]=!1,this.oXhrs[e]){try{this.oXhrs[e].abort&&this.oXhrs[e].abort()}catch(e){}this.oXhrs[e]=null}},I.prototype.oUids={},I.prototype.oForms={},I.prototype.oJua=null,I.prototype.oOptions={},I.prototype.isDragAndDropSupported=function(){return!1},I.prototype.regTaskUid=function(e){this.oUids[e]=!0},I.prototype.uploadTask=function(e,t,i,n,r,a,l){if(!1===this.oUids[e])return n(null,e),!1;var h=this.oForms[e],u=s.clone(y(this.oOptions,"hidden",{})),p=this.oJua.getEvent("onStart"),c=this.oJua.getEvent("onComplete");return h?(h.append(o('<input type="hidden" />').attr("name","jua-post-type").val("iframe")),i=s.extend(i,t.Hidden||{}),u.Parameters=JSON.stringify(i),o.each(u,(function(e,i){h.append(o('<input type="hidden" />').attr("name",e).val(L(i,[t])))})),h.trigger("submit"),p&&p(e),h.find("iframe").on("load",(function(t){var i=!1,s=null,r={};if(c){try{s=this.contentDocument?this.contentDocument:this.contentWindow.document,r=o.parseJSON(s.body.innerHTML),i=!0}catch(e){r={}}c(e,i,r)}n(null,e),window.setTimeout((function(){h.remove()}),100)}))):n(null,e),!0},I.prototype.generateNewInput=function(e){var t=this,i="",s=null,n=null,r=y(this.oOptions,"action",""),a=null,l=y(this.oOptions,"hiddenElementsPosition","left");e&&(i=E(),s=C(y(this.oOptions,"name","juaFile"),!y(this.oOptions,"disableMultiple",!1),y(this.oOptions,"hiddenElementsPosition","left"),y(this.oOptions,"accept","")),a=o('<form action="'+r+'" target="iframe-'+i+'"  method="POST" enctype="multipart/form-data" style="display: block; cursor: pointer;"></form>'),n=o('<iframe name="iframe-'+i+'" tabindex="-1" src="javascript:void(0);"  style="position: absolute; top: -1000px; '+l+': -1000px; cursor: pointer;" />').css({opacity:0}),a.append(P().append(s)).append(n),o(e).append(a),this.oForms[i]=a,s.on("click",(function(e){if(t.oJua.bEnableButton){var i=t.oJua.getEvent("onDialog");i&&i()}else e.preventDefault()})).on("change",(function(){v(this,(function(o){if(o){var s=y(t.oOptions,"hiddenElementsPosition","left");a.css({position:"absolute",top:-1e3}),a.css(s,-1e3),t.oJua.addFile(i,o),t.generateNewInput(e)}}),y(t.oOptions,"multipleSizeLimit",d),t.oJua.getEvent("onLimitReached"))})))},I.prototype.cancel=function(e){this.oUids[e]=!1,this.oForms[e]&&(this.oForms[e].remove(),this.oForms[e]=!1)},D.prototype.bEnableDnD=!0,D.prototype.iDocTimer=0,D.prototype.oOptions={},D.prototype.oEvents={},D.prototype.oQueue=null,D.prototype.oDriver=null,D.prototype.on=function(e,t){return this.oEvents[e]=t,this},D.prototype.runEvent=function(e,t){this.oEvents[e]&&this.oEvents[e].apply(null,t||[])},D.prototype.getEvent=function(e){return this.oEvents[e]||null},D.prototype.cancel=function(e){this.oDriver.cancel(e)},D.prototype.isAjaxUploaderSupported=function(){return(e=document.createElement("input")).type="file",!!("XMLHttpRequest"in window&&"multiple"in e&&"FormData"in window&&(new XMLHttpRequest).upload);var e},D.prototype.setDragAndDropEnabledStatus=function(e){this.bEnableDnD=!!e},D.prototype.isDragAndDropSupported=function(){return this.oDriver.isDragAndDropSupported()},D.prototype.addNewFile=function(e){this.addFile(E(),e)},D.prototype.addFile=function(e,t){var i=this.getEvent("onSelect"),r=null,a=y(this.oOptions,"hidden",{}),l=this.getEvent("onComplete"),u=s.bind((function(e,t){var i,o,s=y(this.oOptions,"hidden",{}),n=JSON.parse(L(s.Parameters,[t]));this.oDriver.regTaskUid(e),this.oQueue.defer((i=this.oDriver.uploadTask,o=this.oDriver,function(){return i.apply(m(o)?null:o,Array.prototype.slice.call(arguments))}),e,t,n)}),this),p=this.getEvent("onCancel");if(!t||i&&!1===i(e,t))this.oDriver.cancel(e);else{r=s.bind((function(e,t,i,s,n,a){var u;u=function(t,s){var n=null;try{n=o.parseJSON(t)}catch(e){}n&&n.Result&&!n.Result.Error&&!n.ErrorCode?i(e,r):n&&n.Result&&n.Result.Error?(h.broadcastEvent("Jua::FileUploadingError"),l(s,!1,{ErrorCode:n.Result.Error})):n&&n.ErrorCode?(h.broadcastEvent("Jua::FileUploadingError"),l(s,!1,{ErrorCode:n.ErrorCode})):(h.broadcastEvent("Jua::FileUploadingError"),l(s,!1))};var p=y(this.oOptions,"hidden",{}),c=JSON.parse(L(p.Parameters,[t]));this.oDriver.regTaskUid(e),this.oDriver.uploadTask(e,t,c,u,s<n,!0,a)}),this);var c=n.observable(!0),d=JSON.parse(L(a.Parameters,[t]));h.broadcastEvent("Jua::FileUpload::isUploadAvailable",{isUploadAvailable:c,sModuleName:a.Module,sUid:e,oFileInfo:t}),c()?!1===h.broadcastEvent("Jua::FileUpload::before",{sUid:e,oFileInfo:t,fOnChunkReadyCallback:r,sModuleName:a.Module,fRegularUploadFileCallback:u,fCancelFunction:p,sStorageType:d.Type})&&u(e,t):s.isFunction(p)&&p(e)}},D.prototype.setOption=function(e,t){this.oOptions[e]=t},e.exports=D},p2SF:function(e,t,i){"use strict";var o=i("F/us"),s=i("AFLV"),n=i("Jq2H"),r={};function a(e){return"p."===e.substr(0,"p.".length)}r.getFiles=function(e,t,i){var o=[n.HashModuleName];return e&&""!==e&&o.push(e),t&&""!==t&&o.push("p."+t),i&&""!==i&&o.push("s."+i),o},r.parseFiles=function(e){var t=0,i="personal",o="",n="";return s.isNonEmptyArray(e)&&(e.length>t&&!a(e[t])&&(i=s.pString(e[t]),t++),e.length>t&&a(e[t])&&(o=s.pString(e[t].substr("p.".length)),t++),e.length>t&&"s."===e[t].substr(0,"s.".length)&&(n=s.pString(e[t].substr("s.".length)))),r.getParsedParams(i,o,n)},r.getParsedParams=function(e,t,i){var n=[],r="";return s.isNonEmptyString(t)?r=(n=o.without(t.split(/(?:\/|\$ZIP\:)/g),""))[n.length-1]:t="",{Storage:e,Path:t,PathParts:n,Name:r,Search:i}},e.exports=r},qsz4:function(e,t,i){"use strict";var o=i("F/us"),s=i("EVdn"),n=i("0h2I"),r=i("czxF");function a(){r.call(this),this.fCallback=null,this.name=n.observable(""),this.focused=n.observable(!1),this.error=n.observable(""),this.name.subscribe((function(){this.error("")}),this)}o.extendOwn(a.prototype,r.prototype),a.prototype.PopupTemplate="FilesWebclient_RenamePopup",a.prototype.onOpen=function(e,t){this.fCallback=t,this.name(e),this.focused(!0),this.error("")},a.prototype.onOKClick=function(){if(this.error(""),s.isFunction(this.fCallback)){var e=this.fCallback(this.name());e?this.error(e):this.closePopup()}else this.closePopup()},e.exports=new a},szb4:function(e,t,i){"use strict";e.exports=function(e){i("kbJU");var t=i("IAk5"),o=i("OgeD"),s=i("RN+F"),n=i("Jq2H"),r=null,a=t.getUserRole()===Enums.UserRole.SuperAdmin,l=t.getUserRole()===Enums.UserRole.TenantAdmin,h=[],u=null,p=null;if(n.init(e),!o.isModuleAvailable(n.ServerModuleName)||!t.isPublic()&&0===n.Storages.length)return null;if(t.isPublic())return{getScreens:function(){var e={};return e[n.HashModuleName]=function(){return new(i("dtb0"))},e}};if(a||t.isUserNormalOrTenant()){if(a)return{start:function(e){e.run("AdminPanelWebclient","registerAdminPanelTab",[function(e){i.e(55).then(function(){e(i("DnLV"))}.bind(null,i)).catch(i.oe)},n.HashModuleName,s.i18n("FILESWEBCLIENT/LABEL_SETTINGS_TAB")])},hidePersonalFilesAdminSection:function(){n.ShowPersonalFilesAdminSection&&(p||(p=i("TX6J")),p.hide())}};if(t.isUserNormalOrTenant())return t.isNewTab()?{getSelectFilesPopup:function(){return i("vsjN")}}:{start:function(e){l&&e.run("AdminPanelWebclient","registerAdminPanelTab",[function(e){i.e(55).then(function(){e(i("DnLV"))}.bind(null,i)).catch(i.oe)},n.HashModuleName,s.i18n("FILESWEBCLIENT/LABEL_SETTINGS_TAB")]),(n.ShowCommonSettings||n.ShowFilesApps)&&e.run("SettingsWebclient","registerSettingsTab",[function(){return i("c3Cn")},n.HashModuleName,s.i18n("FILESWEBCLIENT/LABEL_SETTINGS_TAB")])},getScreens:function(){var e={};return e[n.HashModuleName]=function(){var e=i("dtb0");return(u=new e).registerToolbarButtons(h),h=[],u},e},getHeaderItem:function(){if(null===r){var e=i("Ig+v"),t=""!==n.CustomTabTitle?n.CustomTabTitle:s.i18n("FILESWEBCLIENT/ACTION_SHOW_FILES");r=new e(t)}return{item:r,name:n.HashModuleName}},getSelectFilesPopup:function(){return i("vsjN")},getMobileSyncSettingsView:function(){return i("AGjx")},getFileConstructor:function(e){return i("Pg7U")},addFileToCurrentFolder:function(e){u&&u.addFileToCurrentFolder(e)},refresh:function(){u&&u.refresh()},registerToolbarButtons:function(e){u?u.registerToolbarButtons([e]):h.push(e)}}}return null}},vsjN:function(e,t,i){"use strict";var o=i("F/us"),s=i("EVdn"),n=i("czxF"),r=i("dtb0"),a=i("Pg7U");function l(){n.call(this),this.oFilesView=new r(!0),this.oFilesView.onSelectClickPopupBound=o.bind(this.onSelectClick,this),this.fCallback=null}o.extendOwn(l.prototype,n.prototype),l.prototype.PopupTemplate="FilesWebclient_SelectFilesPopup",l.prototype.onOpen=function(e){s.isFunction(e)&&(this.fCallback=e),this.oFilesView.onShow()},l.prototype.onBind=function(){this.oFilesView.onBind(this.$popupDom)},l.prototype.onSelectClick=function(){var e=this.oFilesView.selector.listCheckedAndSelected(),t=o.filter(e,(function(e){return e instanceof a}),this);this.fCallback&&this.fCallback(t),this.closePopup()},e.exports=new l},"w+bY":function(e,t,i){var o;!function(){function s(e){function t(){for(;a=u<h.length&&e>p;){var t=u++,o=h[t],s=r.call(o,1);s.push(i(t)),++p,o[0].apply(null,s)}}function i(e){return function(i,s){--p,null==d&&(null!=i?(d=i,u=c=NaN,o()):(h[e]=s,--c?a||t():o()))}}function o(){null!=d?m(d):l?m(d,h):m.apply(null,[d].concat(h))}var s,a,l,h=[],u=0,p=0,c=0,d=null,m=n;return e||(e=1/0),s={defer:function(){return d||(h.push(arguments),++c,t()),s},await:function(e){return m=e,l=!1,c||o(),s},awaitAll:function(e){return m=e,l=!0,c||o(),s}}}function n(){}var r=[].slice;s.version="1.0.7",void 0===(o=function(){return s}.call(t,i,t,e))||(e.exports=o)}()}}]);